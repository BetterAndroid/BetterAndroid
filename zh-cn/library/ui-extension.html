<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/BetterAndroid/images/logo.png"><title>ui-extension | Better Android</title><meta name="description" content="为 Android 创建更多有用的工具扩展">
    <link rel="preload" href="/BetterAndroid/assets/style-Rgr8LWAc.css" as="style"><link rel="stylesheet" href="/BetterAndroid/assets/style-Rgr8LWAc.css">
    <link rel="modulepreload" href="/BetterAndroid/assets/app-0wxN3PPV.js"><link rel="modulepreload" href="/BetterAndroid/assets/ui-extension.html-AhrIkix3.js"><link rel="modulepreload" href="/BetterAndroid/assets/ui-extension.html-iw-qvoYT.js">
    <link rel="prefetch" href="/BetterAndroid/assets/index.html-WNhGlR3J.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-b60QpO01.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-8WnkXyDT.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-EJIReltC.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-Yl0gWFcb.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-tDzGS85N.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-L8AUmWJB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-NZotCVhv.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-GrvQpO43.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-XkbATsWj.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html--IpeSDzC.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-7xE5FFIw.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-36xpo09o.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-Lhyy4FO4.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-PeTG5IoS.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component-adapter.html-c3W-X-AD.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-ZAom89Hi.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-60e20R8M.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-1VJUKf1D.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-SKj6kHGM.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-8qKP4333.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-G41ap5rf.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-kmRarnM9.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-GzppQxpQ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-OhhOvxle.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-JGzWV4N2.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-CHiUVFxD.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-72gH30Ee.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-APDCRUbJ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-40l7hFk5.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component-adapter.html-WujOT4PA.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-RywpwH9E.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/404.html-6Yl8cQE3.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-pP1o7NBL.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-IXAi6-7Q.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/index.html-A3PrN_DZ.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-jA1BzUOl.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-pfzhc_23.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-WNwwxs4i.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-tsLXGxBo.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-xie9_Pt5.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-euShFgGn.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-mk-OBuOr.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-HK2inoIx.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-eb0zB1c4.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-xM6w1gsa.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-Lyh4bHMt.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-cg4bad1d.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component-adapter.html-vucSD6xL.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-lwElX9EX.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-extension.html-PDsIqwwe.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/about.html-ba2d65QB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/changelog.html-0g2klFkN.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/contacts.html-TlkMJ1IB.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/future.html-aTv1EbV6.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/basic.html-XT_eiEf2.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/r8-proguard.html-ZBCxUQ20.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/home.html-gOfOxe08.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/quick-start.html-anQGHe32.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-extension.html-Scb2QNbS.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/compose-multiplatform.html-8kc9XTMH.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/permission-extension.html-ASttsgzH.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/system-extension.html-ahCTdT-z.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component-adapter.html-yK5U8Ewj.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/ui-component.html-CTMZC84_.js" as="script"><link rel="prefetch" href="/BetterAndroid/assets/404.html-JQw4QJf0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/BetterAndroid/zh-cn/" class=""><img class="logo" src="/BetterAndroid/images/logo.png" alt="Better Android"><span class="site-name can-hide">Better Android</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="导航"><span class="title">导航</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="导航"><span class="title">导航</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/home.html" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>依赖</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-component.html" class="" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-component-adapter.html" class="" aria-label="ui-component-adapter"><!--[--><!--]--> ui-component-adapter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>配置</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/basic.html" class="" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>关于</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/changelog.html" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/future.html" class="" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/contacts.html" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/about.html" class="" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/BetterAndroid/zh-cn/about/contacts" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/BetterAndroid/en/library/ui-extension.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BetterAndroid/BetterAndroid" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="导航"><span class="title">导航</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="导航"><span class="title">导航</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>入门</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/home.html" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>依赖</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-component.html" class="" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/ui-component-adapter.html" class="" aria-label="ui-component-adapter"><!--[--><!--]--> ui-component-adapter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>配置</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/basic.html" class="" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>关于</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/changelog.html" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/future.html" class="" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/contacts.html" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/BetterAndroid/zh-cn/about/about.html" class="" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/BetterAndroid/zh-cn/about/contacts" class="" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">简体中文 (CN)</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/BetterAndroid/en/library/ui-extension.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/BetterAndroid/BetterAndroid" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">入门 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/guide/home.html" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/guide/quick-start.html" class="sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">依赖 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/library/ui-component.html" class="sidebar-item" aria-label="ui-component"><!--[--><!--]--> ui-component <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/ui-component-adapter.html" class="sidebar-item" aria-label="ui-component-adapter"><!--[--><!--]--> ui-component-adapter <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ui-extension"><!--[--><!--]--> ui-extension <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#配置依赖" class="router-link-active router-link-exact-active sidebar-item" aria-label="配置依赖"><!--[--><!--]--> 配置依赖 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#version-catalog-推荐" class="router-link-active router-link-exact-active sidebar-item" aria-label="Version Catalog (推荐)"><!--[--><!--]--> Version Catalog (推荐) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#传统方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="传统方式"><!--[--><!--]--> 传统方式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#功能介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="功能介绍"><!--[--><!--]--> 功能介绍 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#activity-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="Activity 扩展"><!--[--><!--]--> Activity 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#fragment-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fragment 扩展"><!--[--><!--]--> Fragment 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#边衬区-insets-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="边衬区 (Insets) 扩展"><!--[--><!--]--> 边衬区 (Insets) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#lifecycleowner-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="LifecycleOwner 扩展"><!--[--><!--]--> LifecycleOwner 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#协程-coroutines-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="协程 (Coroutines) 扩展"><!--[--><!--]--> 协程 (Coroutines) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#尺寸-dimension-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="尺寸 (Dimension) 扩展"><!--[--><!--]--> 尺寸 (Dimension) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#资源-resources-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="资源 (Resources) 扩展"><!--[--><!--]--> 资源 (Resources) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#系统颜色-system-colors" class="router-link-active router-link-exact-active sidebar-item" aria-label="系统颜色 (System Colors)"><!--[--><!--]--> 系统颜色 (System Colors) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#颜色-color-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="颜色 (Color) 扩展"><!--[--><!--]--> 颜色 (Color) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#位图-bitmap-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="位图 (Bitmap) 扩展"><!--[--><!--]--> 位图 (Bitmap) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#可绘制-drawable-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="可绘制 (Drawable) 扩展"><!--[--><!--]--> 可绘制 (Drawable) 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#toast-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="Toast 扩展"><!--[--><!--]--> Toast 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#window-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="Window 扩展"><!--[--><!--]--> Window 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#view-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="View 扩展"><!--[--><!--]--> View 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#layoutinflater-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="LayoutInflater 扩展"><!--[--><!--]--> LayoutInflater 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#textview-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="TextView 扩展"><!--[--><!--]--> TextView 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#recyclerview-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="RecyclerView 扩展"><!--[--><!--]--> RecyclerView 扩展 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#布局绑定-viewbinding-扩展" class="router-link-active router-link-exact-active sidebar-item" aria-label="布局绑定 (ViewBinding) 扩展"><!--[--><!--]--> 布局绑定 (ViewBinding) 扩展 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="sidebar-item" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/permission-extension.html" class="sidebar-item" aria-label="permission-extension"><!--[--><!--]--> permission-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/compose-extension.html" class="sidebar-item" aria-label="compose-extension"><!--[--><!--]--> compose-extension <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/library/compose-multiplatform.html" class="sidebar-item" aria-label="compose-multiplatform"><!--[--><!--]--> compose-multiplatform <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">配置 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/config/basic.html" class="sidebar-item" aria-label="基本配置"><!--[--><!--]--> 基本配置 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/config/r8-proguard.html" class="sidebar-item" aria-label="R8 与 Proguard 混淆"><!--[--><!--]--> R8 与 Proguard 混淆 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">关于 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/BetterAndroid/zh-cn/about/changelog.html" class="sidebar-item" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/future.html" class="sidebar-item" aria-label="展望未来"><!--[--><!--]--> 展望未来 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/contacts.html" class="sidebar-item" aria-label="联系我们"><!--[--><!--]--> 联系我们 <!--[--><!--]--></a><!----></li><li><a href="/BetterAndroid/zh-cn/about/about.html" class="sidebar-item" aria-label="关于此文档"><!--[--><!--]--> 关于此文档 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ui-extension" tabindex="-1"><a class="header-anchor" href="#ui-extension" aria-hidden="true">#</a> ui-extension</h1><p><img src="https://img.shields.io/maven-central/v/com.highcapable.betterandroid/ui-extension?logo=apachemaven&amp;logoColor=orange&amp;style=flat-square" alt="Maven Central"><span style="margin-left:5px;"></span><img src="https://img.shields.io/maven-metadata/v?metadataUrl=https%3A%2F%2Fraw.githubusercontent.com%2FHighCapable%2Fmaven-repository%2Frefs%2Fheads%2Fmain%2Frepository%2Freleases%2Fcom%2Fhighcapable%2Fbetterandroid%2Fui-extension%2Fmaven-metadata.xml&amp;logo=apachemaven&amp;logoColor=orange&amp;label=highcapable-maven-releases&amp;style=flat-square" alt="Maven metadata URL"><span style="margin-left:5px;"></span><img src="https://img.shields.io/badge/Min SDK-21-orange?logo=android&amp;style=flat-square" alt="Android Min SDK"></p><p>这是针对 UI (用户界面) 相关功能扩展的一个依赖。</p><h2 id="配置依赖" tabindex="-1"><a class="header-anchor" href="#配置依赖" aria-hidden="true">#</a> 配置依赖</h2><p>你可以使用如下方式将此模块添加到你的项目中。</p><h3 id="version-catalog-推荐" tabindex="-1"><a class="header-anchor" href="#version-catalog-推荐" aria-hidden="true">#</a> Version Catalog (推荐)</h3><p>在你的项目 <code>gradle/libs.versions.toml</code> 中添加依赖。</p><div class="language-toml line-numbers-mode" data-ext="toml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">[</span><span style="color:#F69D50;">versions</span><span style="color:#ADBAC7;">]</span></span>
<span class="line"><span style="color:#ADBAC7;">betterandroid-ui-extension = </span><span style="color:#96D0FF;">&quot;&lt;version&gt;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">[</span><span style="color:#F69D50;">libraries</span><span style="color:#ADBAC7;">]</span></span>
<span class="line"><span style="color:#ADBAC7;">betterandroid-ui-extension = { module = </span><span style="color:#96D0FF;">&quot;com.highcapable.betterandroid:ui-extension&quot;</span><span style="color:#ADBAC7;">, version.ref = </span><span style="color:#96D0FF;">&quot;betterandroid-ui-extension&quot;</span><span style="color:#ADBAC7;"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(libs.betterandroid.ui.extension)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请将 <code>&lt;version&gt;</code> 修改为此文档顶部显示的版本。</p><h3 id="传统方式" tabindex="-1"><a class="header-anchor" href="#传统方式" aria-hidden="true">#</a> 传统方式</h3><p>在你的项目 <code>build.gradle.kts</code> 中配置依赖。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#DCBDFB;">implementation</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.highcapable.betterandroid:ui-extension:&lt;version&gt;&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请将 <code>&lt;version&gt;</code> 修改为此文档顶部显示的版本。</p><h2 id="功能介绍" tabindex="-1"><a class="header-anchor" href="#功能介绍" aria-hidden="true">#</a> 功能介绍</h2><p>你可以 <a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension" target="_blank" rel="noopener noreferrer">点击这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 查看 KDoc。</p><h3 id="activity-扩展" tabindex="-1"><a class="header-anchor" href="#activity-扩展" aria-hidden="true">#</a> Activity 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/start-activity" target="_blank" rel="noopener noreferrer">Activity / Fragment → startActivity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/start-activity-or-else" target="_blank" rel="noopener noreferrer">Activity / Fragment → startActivityOrElse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/is-in-multi-window-mode-compat" target="_blank" rel="noopener noreferrer">Activity → isInMultiWindowModeCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Activity</code> 的扩展。</p></div><p>我们需要启动另一个 <code>Activity</code> 时，需要使用 <code>Intent</code> 创建一个 <code>Intent(this, AnotherActivity::class.java)</code>，然后调用 <code>startActivity(intent)</code> 来启动。</p><p>这样写起来大概不太友好，于是 <code>BetterAndroid</code> 为 <code>Activity</code> 提供了扩展，现在你可以直接使用以下方式来启动另一个 <code>Activity</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设 AnotherActivity 就是你的目标 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用以下方式创建一个 Intent 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">putExtra</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;key&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;value&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 如果你需要使用 Intent.FLAG_ACTIVITY_NEW_TASK 来启动另一个 Activity，</span></span>
<span class="line"><span style="color:#768390;">// 你可以直接这样使用</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;(newTask </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 如果你需要添加启动参数，你可以向其中添加 &quot;options&quot; 选项</span></span>
<span class="line"><span style="color:#768390;">// 例如我们需要一个共享元素动画</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> options </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> ActivityOptionsCompat.</span><span style="color:#DCBDFB;">makeSceneTransitionAnimation</span><span style="color:#ADBAC7;">(activity).</span><span style="color:#DCBDFB;">toBundle</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;(options </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> options)</span></span>
<span class="line"><span style="color:#768390;">// 同样地，你也可以在一个 Fragment 中直接使用</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment: </span><span style="color:#F69D50;">Fragment</span></span>
<span class="line"><span style="color:#768390;">// 假设 AnotherActivity 就是你的目标 Activity</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">AnotherActivity</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要启动一个外部应用程序的 <code>Activity</code>，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的应用程序包名为 com.example.app</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的 Activity 类名为 com.example.app.MainActivity</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你依然可以使用以下方式创建一个 Intent 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">putExtra</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;key&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;value&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// Intent.FLAG_ACTIVITY_NEW_TASK 将会在此方法中默认设置，这是为了避免启动新的应用程序后顶栈重叠，</span></span>
<span class="line"><span style="color:#768390;">// 如果你不需要考虑这个问题，你可以将 newTask 参数设置为 false</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;com.example.app.MainActivity&quot;</span><span style="color:#ADBAC7;">, newTask </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你不知道需要启动的应用程序的入口 <code>Activity</code> 名称，你可以使用包名直接启动它。</p><p>此方法内部将会使用 <code>getLaunchIntentForPackage</code> 来获取入口 <code>Activity</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设你需要启动的应用程序包名为 com.example.app</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">startActivity</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;com.example.app&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此操作在 Android 11 及之后需要 <code>QUERY_ALL_PACKAGES</code> 权限或明确配置一个 <code>queries</code> 属性列表。</p><p>请参考 <a href="https://developer.android.com/training/package-visibility" target="_blank" rel="noopener noreferrer">Package visibility filtering on Android<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>你可以使用 <code>startActivityOrElse</code> 来代替 <code>startActivity</code> 以判断 <code>Activity</code> 是否能够启动成功，启动失败时此方法不会抛出异常，而是返回 <code>false</code>。</p></div><p>针对 Android 7.0 及之后的版本新增的分屏模式，<code>BetterAndroid</code> 为其提供了一个兼容扩展。</p><p>对于 <code>isInMultiWindowMode</code>，你无需考虑版本兼容问题，你只需要在后方加入一个 <code>Compat</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 获取当前是否处于分屏模式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isInMultiWindowMode </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.isInMultiWindowModeCompat</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fragment-扩展" tabindex="-1"><a class="header-anchor" href="#fragment-扩展" aria-hidden="true">#</a> Fragment 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/fragment-manager" target="_blank" rel="noopener noreferrer">Fragment → fragmentManager<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/parent-fragment" target="_blank" rel="noopener noreferrer">Fragment → parentFragment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/find-fragment" target="_blank" rel="noopener noreferrer">Fragment → findFragment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/-fragment-transaction" target="_blank" rel="noopener noreferrer">FragmentTransaction<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/attach" target="_blank" rel="noopener noreferrer">Fragment → attach<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/detach" target="_blank" rel="noopener noreferrer">Fragment → detach<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/replace" target="_blank" rel="noopener noreferrer">Fragment → replace<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/show" target="_blank" rel="noopener noreferrer">Fragment → show<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/hide" target="_blank" rel="noopener noreferrer">Fragment → hide<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Fragment</code> 的扩展。</p></div><p><code>Fragment</code> 是官方提供的针对 <code>Activity</code> 的一个高效片段，但是它的使用方式并不是很友好。</p><p>为了对 <code>Fragment</code> 相关操作进行简化，<code>BetterAndroid</code> 为 <code>Fragment</code> 提供了一些实用的扩展功能。</p><p><code>BetterAndroid</code> 会自动帮你引入 <code>androidx.fragment:fragment-ktx</code> 依赖，你可以 <a href="https://developer.android.com/kotlin/ktx#fragment" target="_blank" rel="noopener noreferrer">参考这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 以开始使用。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 <code>1.0.2</code> 及之前版本中的 <code>commitTransaction</code> 方法已被弃用，本着 “不重复造轮子” 的原则，请迁移到 <code>fragment-ktx</code> 依赖中的 <code>commit</code>、<code>commitNow</code> 方法。</p><p>在 <code>1.0.5</code> 及之后的版本中，我们合并了 <code>...ToActivity</code>、<code>...ToFragment</code> 方法并改进了使用方式，请进行迁移。</p></div><p>获取存在的 <code>FragmentManager</code>。</p><p><code>BetterAndroid</code> 为 <code>FragmentActivity</code> 和 <code>Fragment</code> 提供了一个更加友好的方式来获取存在的 <code>FragmentManager</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment: </span><span style="color:#F69D50;">Fragment</span></span>
<span class="line"><span style="color:#768390;">// 从 FragmentActivity 获取 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从 Fragment 获取 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> fragment.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 对于 Fragment，你可以设置参数 parent 为 true 来获取父 FragmentManager</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragmentManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> fragment.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">(parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用泛型的方式来获取父级 <code>Fragment</code>。</p><p><code>BetterAndroid</code> 为 <code>Fragment</code> 提供了一个更加友好的方式来获取父级 <code>Fragment</code>。</p><p>它可以自动帮你把找到的 <code>Fragment</code> 转换为当前类型而不需要再使用 <code>as</code> 的形式进行强制转换。</p><p>你完全不需要担心找不到或者类型错误的情况，遇到这种情况将会返回 <code>null</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment: </span><span style="color:#F69D50;">Fragment</span></span>
<span class="line"><span style="color:#768390;">// 通过泛型的方式获取父 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parentFragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> fragment.</span><span style="color:#DCBDFB;">parentFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourParentFragment</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用泛型的方式来查找一个存在的 <code>Fragment</code>。</p><p>同样地，它可以自动帮你把找到的 <code>Fragment</code> 转换为当前类型而不需要再使用 <code>as</code> 的形式进行强制转换。</p><p>你完全不需要担心找不到或者类型错误的情况，遇到这种情况将会返回 <code>null</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 FragmentActivity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 通过 ID 查找一个 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">findFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourFragment</span><span style="color:#ADBAC7;">&gt;(R.id.container)</span></span>
<span class="line"><span style="color:#768390;">// 通过 TAG 查找一个 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.</span><span style="color:#DCBDFB;">fragmentManager</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">findFragment</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourFragment</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#96D0FF;">&quot;your_fragment_tag&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>绑定 <code>Fragment</code> 到宿主 (<code>FragmentActivity</code> 或 <code>Fragment</code>)。</p><p>你可以不需要使用类似 <code>FragmentManger.beginTransaction</code>...<code>commit</code> 的方式进行，现在完成这个操作将会更加简单。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>是的，这样你就完成了全部的绑定操作，在默认情况下，如果宿主的类型为 <code>Activity</code>，它会将 <code>Fragment</code> 绑定到 <code>Activity</code> 通过 <code>setContentView</code> 设置的布局中， 如果为 <code>Fragment</code>，它会将 <code>Fragment</code> 绑定到 <code>Fragment.getView</code> 的布局中。</p><p>如果你需要将其绑定到一个自定义的布局中，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 到 ID 为 R.id.container 的布局中</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(activity, R.id.container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果这个自定义的布局不是通过 ID 得到的，而是一个 <code>View</code> 对象，你可以使用以下方式。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这个 <code>View</code> 对象必须已经添加到正在显示的布局中，并建议为其设置一个 ID，未设置 ID 的 <code>View</code> 将会使用 <code>View.generateViewId</code> 生成一个 ID。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> container: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 到 container</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(activity, container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以方便地为 <code>Fragment</code> 设置绑定时的入场动画。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment 并设置入场动画</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    host </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity,</span></span>
<span class="line"><span style="color:#ADBAC7;">    container </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.id.container,</span></span>
<span class="line"><span style="color:#ADBAC7;">    customAnimId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.anim.slide_in_right </span><span style="color:#768390;">// 入场动画</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从宿主解绑 <code>Fragment</code>。</p><p>你同样可以非常方便地解绑 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从宿主解绑 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detach</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所持有的宿主</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">detach</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了绑定，你还能够在同一个绑定的布局中替换掉一个 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 替换 Fragment 到 ID 为 R.id.container 的布局中</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">replace</span><span style="color:#ADBAC7;">(activity, R.id.container)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>显示、隐藏当前 <code>Fragment</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 从宿主显示、隐藏 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">(activity)</span></span>
<span class="line"><span style="color:#768390;">// 如果你不填写参数，则默认获取当前 Fragment 所持有的宿主</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">show</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">hide</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>任何一个绑定、解绑、替换、显示、隐藏操作都可以被设置过渡动画，你可以在这些方法中找到 <code>customAnimId</code>、<code>customEnterAnimId</code> 和 <code>customExitAnimId</code> 参数，默认将不设置动画效果。</p><p>在所有事务事件中，这些方法都保留了 <code>body</code> 参数，你可以继续在其中执行自己的自定义事务。</p><p><code>BetterAndroid</code> 还为你提供了 <code>FragmentTransaction</code>，你可以使用此方法创建一个模版，并应用在自己的 <code>body</code> 中。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的宿主</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">FragmentActivity</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Fragment</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> fragment </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">YourFragment</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(activity) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的事务</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">addSharedElement</span><span style="color:#ADBAC7;">(view, </span><span style="color:#96D0FF;">&quot;shared_element&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 创建一个事务模版</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myTransaction </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FragmentTransaction</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在这里添加一些额外的事务</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">addSharedElement</span><span style="color:#ADBAC7;">(view, </span><span style="color:#96D0FF;">&quot;shared_element&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 绑定 Fragment</span></span>
<span class="line"><span style="color:#ADBAC7;">fragment.</span><span style="color:#DCBDFB;">attach</span><span style="color:#ADBAC7;">(activity, body </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> myTransaction)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>从 <code>1.0.4</code> 版本开始，<code>BetterAndroid</code> 移除了默认的过渡动画并移除了相关资源文件，我们认为过渡动画应该是每个开发者自行决定的事情，并非工具库所为之。</p></div><h3 id="边衬区-insets-扩展" tabindex="-1"><a class="header-anchor" href="#边衬区-insets-扩展" aria-hidden="true">#</a> 边衬区 (Insets) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.insets/-window-insets-wrapper" target="_blank" rel="noopener noreferrer">WindowInsetsWrapper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>WindowInsets</code> 的包装器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.insets/-window-insets-wrapper/-absolute" target="_blank" rel="noopener noreferrer">WindowInsetsWrapper.Absolute<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>WindowInsetsWrapper</code> 的绝对 Insets 对象。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.insets/-insets-wrapper" target="_blank" rel="noopener noreferrer">InsetsWrapper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a><code>Insets</code> 的包装器。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.insets.factory" target="_blank" rel="noopener noreferrer">Insets<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Insets</code>、<code>WindowInsets</code> 的扩展方法。</p></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>“边衬区” 是来自 <a href="https://developer.android.com/develop/ui/views/layout/insets?hl=zh-cn" target="_blank" rel="noopener noreferrer">Android 开发者文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 的简体中文翻译，请以英文原版的 Insets 为准。</p></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 <a href="./ui-component">ui-component</a> <code>1.0.3</code> 及之前版本的依赖中，<code>BetterAndroid</code> 将 Insest、Window Insets 与 <a href="./ui-component#%E7%B3%BB%E7%BB%9F%E6%A0%8F-%E7%8A%B6%E6%80%81%E6%A0%8F%E3%80%81%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%AD%89">系统栏 (状态栏、导航栏等)</a> 封装在了一起， 这是曾经不正确的做法，目前对于 Insets、Window Insets 已被解耦合为独立的功能，正如你现在所看到的。</p></div><p>Insets 和 Window Insets 在 Android 中是一个非常重要的概念，虽然这个 API 早在 Android 5.0 就已经存在了，但是在 Android 10 中才被官方正式推荐使用。(自 Android 9 开始，系统加入了异形屏处理的相关 API)</p><p>Insets 是一个特殊的空间，它代表 “附着” 在视图四周的占位区域，而诸如异形屏 (刘海屏) 遮挡的部分、状态栏、导航栏以及输入法等系统持有的 Insets 则称为 Window Insets。</p><p><code>BetterAndroid</code> 所做的主要就是对这套 API 进行了封装，使其更加易用。</p><p>下面，你可以通过一个存在的 <code>WindowInsets</code> 对象来创建一个 <code>WindowInsetsWrapper</code> 对象。</p><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>WindowInsetsWrapper</code> 是参照 Jetpack Compose 官方提供的 <a href="https://developer.android.com/jetpack/compose/layouts/insets" target="_blank" rel="noopener noreferrer">Window Insets API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 设计的，你能够更加有好的在原生层面上使用这套 API。</p></div><p>出于对向下兼容的考虑，<code>WindowInsetsWrapper</code> 封装的对象为 <code>WindowInsetsCompat</code> 并建议使用它而不是 <code>WindowInsets</code>。</p><p><code>WindowInsetsWrapper</code> 封装了 <code>WindowInsetsCompat.getInsets</code>、<code>WindowInsetsCompat.getInsetsIgnoringVisibility</code>、<code>WindowInsetsCompat.isVisible</code> 等方法， 你无需再为了获取一个 Insets 对象而写超级长的 <code>WindowInsetsCompat.getInsets(WindowInsetsCompat.Type.systemBars())</code> 等代码。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 WindowInsets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowInsets: </span><span style="color:#F69D50;">WindowInsetsCompat</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> windowInsets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(windowInsets)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 通常情况下，获取到的 Insets 会包含它的可见性，</span></span>
<span class="line"><span style="color:#768390;">// 在不可见的情况下，Insets 的值全部为 0</span></span>
<span class="line"><span style="color:#768390;">// 你可以通过参数 ignoringVisibility 来忽略可见性</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.</span><span style="color:#DCBDFB;">systemBars</span><span style="color:#ADBAC7;">(ignoreVisibility </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取到 Insets 对象后，你可以使用 isVisible 来判断其是否可见</span></span>
<span class="line"><span style="color:#768390;">// 注意：Insets 的值是由系统提供的，isVisible 只是一个状态，</span></span>
<span class="line"><span style="color:#768390;">// 无论其值是否为 0，你都可以使用它来判断当前的 Insets 是否可见</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsIsVisible </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemBars.isVisible</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 针对 Android 9 以下异形屏设备的主流品牌的厂商各自的私有方案做了一个兼容处理，如果你需要兼容更旧的设备，你可以在方法参数中传入一个可选的 <code>Window</code> 对象。</p><p>如果你的应用程序只需要适配 Android 9 及以上的设备，你可以忽略此参数。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 在通常情况下，你可以通过当前 Activity 获取 Window</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.window</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> windowInsets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">(window)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(windowInsets, window)</span></span>
<span class="line"><span style="color:#768390;">// 获取异形屏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> displayCutout </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.displayCutout</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>如果你的应用程序需要在 Android 10 或以下设备上运行，我们建议始终传入一个 <code>Window</code> 对象以保证 <code>BetterAndroid</code> 能正确为你处理兼容问题。</p><p>目前已知兼容问题为 <code>androidx</code> 提供的兼容处理方法无法对 Android 11 以下设备的 <code>statusBars</code>、<code>navigationBars</code>、<code>systemBars</code> 的 <code>isVisible</code> 和其内容给出正确的值，<code>BetterAndroid</code> 为此进行了修复。</p></div><p>你从 <code>WindowInsetsWrapper</code> 获取到的任何 Insets 对象即 <code>InsetsWrapper</code>，它封装了 <code>Insets</code> 对象并实现了可控的 <code>isVisible</code> 状态。</p><p><code>InsetsWrapper</code> 可以轻松地转换为原始的 <code>Insets</code> 对象，同时也可以重新转换为 <code>InsetsWrapper</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 转换为 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemBars.</span><span style="color:#DCBDFB;">toInsets</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 转换为 InsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> wrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets.</span><span style="color:#DCBDFB;">toWrapper</span><span style="color:#ADBAC7;">(systemBars.isVisible)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 of 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> wrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(insets, systemBars.isVisible)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与 <code>Insets</code> 不同的是，<code>InsetsWrapper</code> 重载了运算符，你可以使用 <code>+</code>、<code>-</code> 以及 <code>or</code>、<code>and</code> 来对其进行运算或是对其进行比较。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets2 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> InsetsWrapper.</span><span style="color:#DCBDFB;">of</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">20</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;+&quot; 运算符，等同于 Insets.add(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">+</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;-&quot; 运算符，等同于 Insets.subtract(insets2, insets1)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets2 </span><span style="color:#F47067;">-</span><span style="color:#ADBAC7;"> insets1</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;or&quot; 运算符，等同于 Insets.max(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 or insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;and&quot; 运算符，等同于 Insets.min(insets1, insets2)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insets3 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 and insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;&gt;&quot; 运算符进行比较</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isUpperTo </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"><span style="color:#768390;">// 使用 &quot;&lt;&quot; 运算符进行比较</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isLowerTo </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets1 </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> insets2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取到 Insets 对象后，一般做法是设置为 <code>View</code> 的 <code>padding</code>，让其为系统占位置的地方 “让路”。</p><p>无论是 <code>InsetsWrapper</code> 还是 <code>Insets</code>，你都不需要使用诸如 <code>View.setPadding(insets.left, insets.top, insets.right, insets.bottom)</code> 这样的形式，这看起来及其不友好。</p><p>你可以使用以下方式来轻松地将它直接设置为 <code>View</code> 的 <code>padding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper.systemBars</span></span>
<span class="line"><span style="color:#768390;">// 使用 Insets 设置 View 的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">setInsetsPadding</span><span style="color:#ADBAC7;">(systemBars)</span></span>
<span class="line"><span style="color:#768390;">// 由于这里演示的对象是系统栏，你可以仅更新纵向 (上下) 的 padding</span></span>
<span class="line"><span style="color:#768390;">// 使用 updateInsetsPadding 方法的作用同 updatePadding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateInsetsPadding</span><span style="color:#ADBAC7;">(systemBars, vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面我们说到了，要创建一个 <code>WindowInsetsWrapper</code> 对象，你需要一个已存在的 <code>WindowInsetsCompat</code> 对象。</p><p>出于对向下兼容的考虑，你可以使用 <code>ViewCompat.setOnApplyWindowInsetsListener</code> 来为 <code>View</code> 设置一个改变监听。</p><p>它的实质作用是控制 Window Insets 的传递，Window Insets 通过 <code>View.onApplyWindowInsets</code> 方法由根视图向子视图传递， 直到你使用 <code>WindowInsetsCompat.CONSUMED</code> 来明确消费掉它才会停止传递。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">ViewCompat.</span><span style="color:#DCBDFB;">setOnApplyWindowInsetsListener</span><span style="color:#ADBAC7;">(view) { view, insets </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// insets 就是当前的 WindowInsetsCompat 对象</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 你可以通过它创建 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insets.</span><span style="color:#DCBDFB;">createWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 在最后一位消费掉 Window Insets，将停止继续向下传递</span></span>
<span class="line"><span style="color:#ADBAC7;">    WindowInsetsCompat.CONSUMED </span><span style="color:#768390;">// 或者填入当前的 insets 继续向下传递</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样的做法看起来会很麻烦，所以 <code>BetterAndroid</code> 同样为你提供了一个更加简单的方法。</p><p>例如，我们需要得知输入法所占的空间并为输入法布局设置来自 Window Insets 的 <code>padding</code>。</p><p>此时你可以使用 <code>View.handleOnWindowInsetsChanged</code> 直接得到一个 <code>WindowInsetsWrapper</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的输入法布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imeSpaceLayout: </span><span style="color:#F69D50;">FrameLayout</span></span>
<span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;"> { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 设置由 ime 提供的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">    imeSpaceLayout.</span><span style="color:#DCBDFB;">setInsetsPadding</span><span style="color:#ADBAC7;">(insetsWrapper.ime)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者使用 ime 更新底部的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">    imeSpaceLayout.</span><span style="color:#DCBDFB;">updateInsetsPadding</span><span style="color:#ADBAC7;">(insetsWrapper.ime, bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想对子视图消费掉 Window Insets 使其不再向下传递，你只需要在方法参数中设置 <code>consumed = true</code> 即可。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;">(consumed </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">) { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>如果你发现 <code>handleOnWindowInsetsChanged</code> 设置后没有被立即触发，可能是因为当前 <code>View</code> 并未附加到窗口上 (Window) 导致的，如果你想在 <code>View</code> 在执行 <code>onLayout</code> 时触发一次回调，你可以在方法参数中设置 <code>requestApplyOnLayout = true</code>。</p></div><p>如果你想同时在 Window Insets 改变时使其拥有动画效果，你无需重新设置一个 <code>View.setWindowInsetsAnimationCallback</code>。</p><p>你只需要在方法参数中设置 <code>animated = true</code> 即可，这样回调就会在每次 Window Insets 改变中触发。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 处理 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">imeSpaceLayout.</span><span style="color:#DCBDFB;">handleOnWindowInsetsChanged</span><span style="color:#ADBAC7;">(animated </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">) { imeSpaceLayout, insetsWrapper </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 内容与上述相同</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这个特性是从 Android 11 开始引入的，在这之前的系统中回调依然会被立即触发，所以将不会产生任何动画效果。</p></div><p>另外，当你设置了 Window Insets 改变的监听后，你不需要关心监听是何时设置的，你可以在任何时候移除它们。</p><p>这个操作会移除所有 <code>View.setOnApplyWindowInsetsListener</code>、<code>View.setWindowInsetsAnimationCallback</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 移除 View 的 Window Insets 改变监听</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeWindowInsetsListener</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>你只能为一个 <code>View</code> 设置一个 Window Insets 监听，重复设置的监听会被最后一次覆盖掉。</p></div><p>如果你想直接从当前 <code>View</code> 中获取 Window Insets，那么你还可以使用以下方式创建一个 <code>WindowInsetsWrapper</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你当前的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">createRootWindowInsetsWrapper</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以通过 from 方法来创建</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> insetsWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(view)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#768390;">// 如果无法通过 View 获取到 Window Insets，将会返回 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> insetsWrapper?.systemBars</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了上述做法，<code>WindowInsetsWrapper</code> 还提供了一个 <code>WindowInsetsWrapper.Absolute</code> 对象，你可以无需通过任何监听即可直接通过 <code>Window.getDecorView</code> 获取到一个绝对的 Insets 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这个就是你的 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity: </span><span style="color:#F69D50;">Activity</span></span>
<span class="line"><span style="color:#768390;">// 在通常情况下，你可以通过当前 Activity 获取 Window</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> activity.window</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 WindowInsetsWrapper.Absolute</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> absoluteWrapper </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> WindowInsetsWrapper.Absolute.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(window)</span></span>
<span class="line"><span style="color:#768390;">// 获取状态栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> statusBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.statusBar</span></span>
<span class="line"><span style="color:#768390;">// 获取导航栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> navigationBar </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.navigationBar</span></span>
<span class="line"><span style="color:#768390;">// 获取系统栏的 Insets</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemBars </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> absoluteWrapper.systemBars</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这种方式获取到的值仅供参考，我们并不推荐这样去获取 Insets 对象，在当前为异形屏设备时，这些值可能会不准确。</p></div><p>以下是 <code>WindowInsetsWrapper</code> 中提供的全部 Insets。</p><table><thead><tr><th>Insets</th><th>描述</th></tr></thead><tbody><tr><td><code>statusBars</code></td><td>状态栏</td></tr><tr><td><code>navigationBars</code></td><td>导航栏</td></tr><tr><td><code>captionBar</code></td><td>标题栏</td></tr><tr><td><code>systemBars</code></td><td>系统栏 (<code>captionBar</code> + <code>statusBars</code> + <code>navigationBars</code>)</td></tr><tr><td><code>ime</code></td><td>输入法</td></tr><tr><td><code>tappableElement</code></td><td>可点击元素</td></tr><tr><td><code>systemGestures</code></td><td>系统手势</td></tr><tr><td><code>mandatorySystemGestures</code></td><td>强制系统手势</td></tr><tr><td><code>displayCutout</code></td><td>异形屏 (刘海屏)</td></tr><tr><td><code>waterFall</code></td><td>瀑布屏 (曲面屏)</td></tr><tr><td><code>safeGestures</code></td><td>安全手势 (<code>systemGestures</code> + <code>mandatorySystemGestures</code> + <code>waterFall</code> + <code>tappableElement</code>)</td></tr><tr><td><code>safeDrawing</code></td><td>安全绘制 (<code>displayCutout</code> + <code>systemBars</code> + <code>ime</code>)</td></tr><tr><td><code>safeDrawingIgnoringIme</code></td><td>安全绘制 (不包括 <code>ime</code>) (<code>displayCutout</code> + <code>systemBars</code>)</td></tr><tr><td><code>safeContent</code></td><td>安全内容 (<code>safeDrawing</code> + <code>safeGestures</code>)</td></tr></tbody></table><p>以下是 <code>WindowInsetsWrapper.Absolute</code> 中提供的全部 Insets。</p><table><thead><tr><th>Insets</th><th>描述</th></tr></thead><tbody><tr><td><code>statusBars</code></td><td>状态栏</td></tr><tr><td><code>navigationBars</code></td><td>导航栏</td></tr><tr><td><code>systemBars</code></td><td>系统栏 (<code>statusBars</code> + <code>navigationBars</code>)</td></tr></tbody></table><h3 id="lifecycleowner-扩展" tabindex="-1"><a class="header-anchor" href="#lifecycleowner-扩展" aria-hidden="true">#</a> LifecycleOwner 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/context" target="_blank" rel="noopener noreferrer">LifecycleOwner → context<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/activity" target="_blank" rel="noopener noreferrer">LifecycleOwner → activity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/require-context" target="_blank" rel="noopener noreferrer">LifecycleOwner → requireContext<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/require-activity" target="_blank" rel="noopener noreferrer">LifecycleOwner → requireActivity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/lifecycle-owner" target="_blank" rel="noopener noreferrer">View → lifecycleOwner<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/require-lifecycle-owner" target="_blank" rel="noopener noreferrer">View → requireLifecycleOwner<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>LifecycleOwner</code> 的扩展。</p></div><p><code>LifecycleOwner</code> 是 Android Jetpack 中的一个重要组件，它为 <code>Activity</code>、<code>Fragment</code> 等提供了生命周期的管理。</p><p><code>BetterAndroid</code> 为 <code>LifecycleOwner</code> 提供了通过其获取上下文的职能，你可以在常用继承于 <code>LifecycleOwner</code> 的实例中使用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 LifecycleOwner</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lcOwner: </span><span style="color:#F69D50;">LifecycleOwner</span></span>
<span class="line"><span style="color:#768390;">// 获取上下文</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.context</span></span>
<span class="line"><span style="color:#768390;">// 获取 Activity</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.activity</span></span>
<span class="line"><span style="color:#768390;">// 获取非空上下文 (获取失败会抛出异常)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.</span><span style="color:#DCBDFB;">requireContext</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 获取非空 Activity (获取失败会抛出异常)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> activity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.</span><span style="color:#DCBDFB;">requireActivity</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你也可以将获取到的 Activity 转换为指定的类型</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> yourActivity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.</span><span style="color:#DCBDFB;">activity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 或者</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> yourActivity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.</span><span style="color:#DCBDFB;">requireActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以从一个 <code>View</code> 中获取其所在的 <code>LifecycleOwner</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取 View 所在的 LifecycleOwner</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lcOwner </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.lifecycleOwner</span></span>
<span class="line"><span style="color:#768390;">// 获取非空 LifecycleOwner (获取失败会抛出异常)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lcOwner </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">requireLifecycleOwner</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">特别注意</p><p>这本质上是一个实验性功能，从 <code>View</code> 获取的 <code>LifecycleOwner</code> 是不确定的， 它本质上是通过获取 <code>View</code> 中的上下文来确定并优先选择 <code>Activity</code> 中绑定的首位 <code>Fragment</code>，如果没有绑定 <code>Fragment</code> 则会选择 <code>Activity</code>。</p><p>我们建议优先对自定义 <code>View</code> 采用传递当前 <code>LifecycleOwner</code> 的方式来获取，或者在 <code>View</code> 装载后传递。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 你可以在构造函数中传递 LifecycleOwner</span></span>
<span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourView</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    context: </span><span style="color:#F69D50;">Context</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    attrs: </span><span style="color:#F69D50;">AttributeSet</span><span style="color:#ADBAC7;">?,</span></span>
<span class="line"><span style="color:#ADBAC7;">    lcOwner: </span><span style="color:#F69D50;">LifecycleOwner</span></span>
<span class="line"><span style="color:#ADBAC7;">) : </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">context</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">attrs</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者在装载后设置 LifecycleOwner</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> lifecycleOwner: </span><span style="color:#F69D50;">LifecycleOwner</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">init</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 在你的 LifecycleOwner 中设置</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> yourView: </span><span style="color:#F69D50;">YourView</span></span>
<span class="line"><span style="color:#768390;">// 假设 this 就是当前的 LifecycleOwner</span></span>
<span class="line"><span style="color:#ADBAC7;">yourView.lifecycleOwner </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">this</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="协程-coroutines-扩展" tabindex="-1"><a class="header-anchor" href="#协程-coroutines-扩展" aria-hidden="true">#</a> 协程 (Coroutines) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/launch" target="_blank" rel="noopener noreferrer">LifecycleOwner → launch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/async" target="_blank" rel="noopener noreferrer">LifecycleOwner → async<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/run-delayed" target="_blank" rel="noopener noreferrer">CoroutinesScope / LifecycleOwner → runDelayed<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component/repeat-with-delay" target="_blank" rel="noopener noreferrer">CoroutinesScope / LifecycleOwner → repeatWithDelay<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于协程的扩展。</p></div><p>协程 (Coroutines) 是 Kotlin 中的一个重要特性，它为异步编程提供了一种更加优雅的解决方案。</p><p>协程本身作为 Kotlin 的一个标准库，它并不会直接与 Android 的生命周期进行绑定，为此 <code>BetterAndroid</code> 为其提供了一些实用的扩展功能并将其作用于 UI 重要的交互桥梁。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这些扩展功能仅支持使用 Kotlin 实现，如果你正在使用 Java，你将无法使用这些扩展功能。</p></div><p>在 Android 生命周期中使用协程每次都需要使用 <code>lifecycleScope</code>，试图在证明 “我是我”，虽然调用域规范，但是显得很臃肿。</p><p>现在，你不再需要使用 <code>lifecycleScope.launch</code> 来启动一个协程，你可以直接在任何继承于 <code>LifecycleOwner</code> 的实例中使用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 LifecycleOwner</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lcOwner: </span><span style="color:#F69D50;">LifecycleOwner</span></span>
<span class="line"><span style="color:#768390;">// 启动一个协程</span></span>
<span class="line"><span style="color:#ADBAC7;">lcOwner.</span><span style="color:#DCBDFB;">launch</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 启动一个异步协程</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> deferred </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> lcOwner.</span><span style="color:#DCBDFB;">async</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除此之外，<code>BetterAndroid</code> 还为协程提供了更多适用于 Android 主线程与非主线程互相切换的扩展功能。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 LifecycleOwner</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lcOwner: </span><span style="color:#F69D50;">LifecycleOwner</span></span>
<span class="line"><span style="color:#768390;">// 延迟 1s 后执行</span></span>
<span class="line"><span style="color:#ADBAC7;">lcOwner.</span><span style="color:#DCBDFB;">runDelayed</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1000</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 重复执行 10 次，每次默认延迟 1s</span></span>
<span class="line"><span style="color:#ADBAC7;">lcOwner.</span><span style="color:#DCBDFB;">repeatWithDelay</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">) { index </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    Log.</span><span style="color:#DCBDFB;">d</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Repeat&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;Index: </span><span style="color:#6CB6FF;">$index</span><span style="color:#96D0FF;">&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="尺寸-dimension-扩展" tabindex="-1"><a class="header-anchor" href="#尺寸-dimension-扩展" aria-hidden="true">#</a> 尺寸 (Dimension) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/-display-density" target="_blank" rel="noopener noreferrer">DisplayDensity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>对 Density 的友好处理接口。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-px" target="_blank" rel="noopener noreferrer">Dimension → toPx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-dp" target="_blank" rel="noopener noreferrer">Dimension → toDp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 Dimension 的扩展。</p></div><p>在 Android 的 UI 中无处不存在着尺寸的问题，例如你需要将一个 <code>View</code> 的 <code>padding</code> 设置为 10dp，在 XML 布局中能够很方便地设置， 但是在代码中你需要使用 <code>TypedValue.applyDimension</code> 来进行转换，这样的代码看起来并不是很友好。</p><p>于是，大家都开始去封装一个形如 <code>dp2px</code> 的方法，但是这样的做法依然不是很优雅且存在问题。</p><p><code>BetterAndroid</code> 为此提供了一个更加优雅的解决方案。</p><p>一般情况下，你只需要传入一个存在的 <code>Context</code> 或 <code>Resources</code> 即可完成转换。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(resources)</span></span>
<span class="line"><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">(resources)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你当前已经处于一个存在 <code>Context</code> 或 <code>Resources</code> 的环境中，你可以像下面这样写得更加简便一点。</p><p>这个时候你只需要为当前的实例实现一个 <code>DisplayDensity</code> 接口即可，你无需重写任何方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">AppCompatActivity</span><span style="color:#ADBAC7;">(), </span><span style="color:#DCBDFB;">DisplayDensity</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 10dp 转换为 px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> px </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.px</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 将 36px 转换为 dp</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> dp </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">36</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toDp</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p><code>DisplayDensity</code> 接口仅支持被实现到以下实例或是被其继承的实例中：</p><p><code>Context</code>、<code>Window</code>、<code>View</code>、<code>Resources</code>、<code>Fragment</code>、<code>Dialog</code></p><p>如果在不支持的实例中使用将会抛出异常，如果你愿意，你也可以重写 <code>DisplayDensity</code> 接口中的方法手动进行支持。</p><p><code>dp</code>、<code>px</code>、<code>toPx</code>、<code>toDp</code> 的命名方式可能会与 Jetpack Compose 中的命名方式冲突，所以不建议在这样的项目中使用。</p></div><h3 id="资源-resources-扩展" tabindex="-1"><a class="header-anchor" href="#资源-resources-扩展" aria-hidden="true">#</a> 资源 (Resources) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/theme-res-id" target="_blank" rel="noopener noreferrer">Resources → themeResId<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/is-ui-in-night-mode" target="_blank" rel="noopener noreferrer">Resources → isUiInNightMode<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/to-hex-resource-id" target="_blank" rel="noopener noreferrer">Resources → toHexResourceId<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-drawable-compat" target="_blank" rel="noopener noreferrer">Resources → getDrawableCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-compat" target="_blank" rel="noopener noreferrer">Resources → getColorCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-state-list-compat" target="_blank" rel="noopener noreferrer">Resources → getColorStateListCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-float-compat" target="_blank" rel="noopener noreferrer">Resources → getFloatCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-font-compat" target="_blank" rel="noopener noreferrer">Resources → getFontCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-boolean" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsBoolean<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-float" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsFloat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-integer" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsInteger<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-int-array" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsIntArray<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-string-array" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsStringArray<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-string" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsString<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-dimension" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsDimension<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-drawable" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsDrawable<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-color-state-list" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsColorStateList<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-color" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsColor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/are-theme-attrs-ids-value-equals" target="_blank" rel="noopener noreferrer">Resources → areThemeAttrsIdsValueEquals<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/has-theme-attrs-id" target="_blank" rel="noopener noreferrer">Resources → hasThemeAttrsId<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-theme-attrs-id" target="_blank" rel="noopener noreferrer">Resources → getThemeAttrsId<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-menu-from-resource" target="_blank" rel="noopener noreferrer">Resources → getMenuFromResource<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-string-array" target="_blank" rel="noopener noreferrer">Resources → getStringArray<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-int-array" target="_blank" rel="noopener noreferrer">Resources → getIntArray<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-or-null" target="_blank" rel="noopener noreferrer">Resources → getColorOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-color-state-list-or-null" target="_blank" rel="noopener noreferrer">Resources → getColorStateListOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-integer-or-null" target="_blank" rel="noopener noreferrer">Resources → getIntegerOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-int-or-null" target="_blank" rel="noopener noreferrer">Resources → getIntOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-text-or-null" target="_blank" rel="noopener noreferrer">Resources → getTextOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-string-or-null" target="_blank" rel="noopener noreferrer">Resources → getStringOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-boolean-or-null" target="_blank" rel="noopener noreferrer">Resources → getBooleanOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-float-or-null" target="_blank" rel="noopener noreferrer">Resources → getFloatOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-dimension-or-null" target="_blank" rel="noopener noreferrer">Resources → getDimensionOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-dimension-pixel-size-or-null" target="_blank" rel="noopener noreferrer">Resources → getDimensionPixelSizeOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-dimension-pixel-offset-or-null" target="_blank" rel="noopener noreferrer">Resources → getDimensionPixelOffsetOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-layout-dimension-or-null" target="_blank" rel="noopener noreferrer">Resources → getLayoutDimensionOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-drawable-or-null" target="_blank" rel="noopener noreferrer">Resources → getDrawableOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.base/get-font-or-null" target="_blank" rel="noopener noreferrer">Resources → getFontOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Resources</code> 的扩展。</p></div><p>资源 (Resources) 是 Android 中非常重要的一个部分，它包含了应用程序中需要的布局、图片、字符串等等。</p><p>为了能更加方便地使用 <code>Resources</code>，<code>BetterAndroid</code> 为其提供了一些实用的扩展功能。</p><p>获取 <code>ContextThemeWrapper</code> 中的主题资源 ID。</p><p>通常情况下使用 <code>setTheme</code> 设置的主题资源 ID 是无法直接获取到的，为此 <code>BetterAndroid</code> 通过反射的方式为你提供了一个获取方式。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此方法可能不会适用于所有设备或兼容所有 Android 版本，请自行测试。</p></div><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ContextThemeWrapper</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">ContextThemeWrapper</span></span>
<span class="line"><span style="color:#768390;">// 获取已设置的主题资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> themeResId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.themeResId</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>针对 <code>Resources</code> 中的 attr 属性，通常情况下我们需要创建一个 <code>TypedValue</code> 对象，然后使用 <code>Context.getTheme().resolveAttribute</code> 来对它填充相应的 ID 以获取到其本身的值内容。</p><p>例如我们需要获取 <code>android.R.attr.windowBackground</code> 的值，我们需要这样去做。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 TypedValue 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> typedValue </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">TypedValue</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用 Context.getTheme().resolveAttribute 来填充相应的 ID</span></span>
<span class="line"><span style="color:#ADBAC7;">context.theme.</span><span style="color:#DCBDFB;">resolveAttribute</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground, typedValue, </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取所在资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> typedValue.resourceId</span></span>
<span class="line"><span style="color:#768390;">// 获取其本身的值内容</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawable</span><span style="color:#ADBAC7;">(windowBackgroundId)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>整个过程下来可谓是非常繁琐，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><p>现在，你只需要使用以下方式即可获取其本身的值内容。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取其本身的值内容</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getThemeAttrsDrawable</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你只需要获取 attr 所对应的资源 ID，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取所在资源 ID</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> windowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getThemeAttrsId</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以仅判断 attr 所对应的资源 ID 是否存在。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 判断 attr 所对应的资源 ID 是否存在</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hasWindowBackgroundId </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">hasThemeAttrsId</span><span style="color:#ADBAC7;">(android.R.attr.windowBackground)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还能够比较两个 attr 的值内容是否相等。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 比较两个 attr 的值内容是否相等</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isEquals </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">areThemeAttrsIdsValueEquals</span><span style="color:#ADBAC7;">(R.attr.first_attr, R.attr.second_attr)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>Context.getThemeAttrs*</code> 系列方法支持 Android 中能够被转换到实际资源对象的常用实例，例如 <code>getThemeAttrsColor</code>、<code>getThemeAttrsInteger</code>、<code>getThemeAttrsString</code> 等。</p><p>目前 <code>Context.getThemeAttrs*</code>、<code>Context.areThemeAttrsIdsValueEquals</code> 支持以下常用资源 ID 的值内容：</p><p><code>Color</code>、<code>ColorStateList</code>、<code>Drawable</code>、<code>Dimension</code>、<code>String</code>、<code>StringArray</code>、<code>IntArray</code>、<code>Float</code>、<code>Boolean</code></p></div><p>在 Android 中没有提供直接获取 <code>Menu</code> 资源 ID 并解析为 <code>Menu</code> 对象的方式，为此 <code>BetterAndroid</code> 提供了一个可能的获取方式。</p><p><code>BetterAndroid</code> 封装了使用 <code>PopupMenu</code> 并通过 <code>MenuInflater</code> 的形式将获取到的内容转换为一个 <code>List&lt;MenuItem&gt;</code> 对象的方法。</p><p>现在，你可以非常方便地使用以下方式来获取 <code>Menu</code> 资源 ID 的值内容。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 获取 Menu 资源 ID 的值内容</span></span>
<span class="line"><span style="color:#768390;">// 获取到的内容即为一个 List&lt;MenuItem&gt; 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> menuItems </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getMenuFromResource</span><span style="color:#ADBAC7;">(R.menu.my_menu)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>针对历史版本系统的兼容性处理，<code>BetterAndroid</code> 封装了由 <code>ResourcesCompat</code> 提供的方法，现在，你不需要考虑一些方法被作废的问题， 你只需要在每个方法后加上 <code>Compat</code> 即可自动为其兼容化处理，并能够像原方法一样进行调用，功能完全一致。</p><p>下面是一个针对 <code>Drawable</code> 的兼容性处理示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 通过 Context 获取 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">(R.drawable.my_drawable)</span></span>
<span class="line"><span style="color:#768390;">// 通过 Resources 获取 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> resources.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">(R.drawable.my_drawable, context.theme)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以使用泛型的方式将其转换为对应的类型</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.</span><span style="color:#DCBDFB;">getDrawableCompat</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ColorDrawable</span><span style="color:#ADBAC7;">&gt;(R.drawable.my_background)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是原始方法与兼容性处理方法的对照表。</p><table><thead><tr><th>原始方法</th><th>兼容性处理方法</th></tr></thead><tbody><tr><td><code>Context.getDrawable</code></td><td><code>Context.getDrawableCompat</code></td></tr><tr><td><code>Context.getColor</code></td><td><code>Context.getColorCompat</code></td></tr><tr><td><code>Context.getColorStateList</code></td><td><code>Context.getColorStateListCompat</code></td></tr><tr><td><code>Context.getFloat</code></td><td><code>Context.getFloatCompat</code></td></tr><tr><td><code>Resources.getDrawable</code></td><td><code>Resources.getDrawableCompat</code></td></tr><tr><td><code>Resources.getColor</code></td><td><code>Resources.getColorCompat</code></td></tr><tr><td><code>Resources.getColorStateList</code></td><td><code>Resources.getColorStateListCompat</code></td></tr><tr><td><code>Resources.getFloat</code></td><td><code>Resources.getFloatCompat</code></td></tr><tr><td><code>Resources.getFont</code></td><td><code>Context.getFontCompat</code></td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">小提示</p><p><code>BetterAndroid</code> 还为 <code>TypedArray</code> 提供了 <code>getStringArray</code>、<code>getIntArray</code> 以及 <code>getColorOrNull</code> 等实用方法，你可以在上方的 <strong>本节内容</strong> 中找到它们。</p><p><code>TypedArray.get...OrNull</code> 的作用不同于原始方法的功能，它会首先判断是否存在此属性资源，然后才会返回相关结果，如果不存在则返回默认的 <code>defValue</code>，默认为 <code>null</code>。</p><p>例如 Color 这种属性资源，有的时候我们需要明确确定用户是否设置了此属性，原始的方法只能设置一个非 <code>null</code> 的默认值，但是颜色在任何数值上都有作用，此时 <strong>首先判断是否存在此属性资源</strong> 的作用就应运而生。</p><p>具体实现方案就是 <code>val myType = if (value.hasValue(index)) value.get...(..., ...) else ...</code>，在实际应用中，我们需要自己封装一个这样的做法去实现对应的属性资源调用，显得很繁琐， 所以现在 <code>BetterAndroid</code> 为你提供了这种封装，你可以直接使用如下方式进行操作。</p><blockquote><p>示例如下</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">declare-styleable</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;MyView&quot;</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">attr</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;myType&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">format</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;color&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">declare-styleable</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">com.example.MyView</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">android:layout_width</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">android:layout_height</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">app:myType</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;#FF000000&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">withStyledAttributes</span><span style="color:#ADBAC7;">(attrs, R.styleable.MyView) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 如果 &quot;app:myType&quot; 已被声明于 XML 中，则 myType 的值为 0xFF000000，否则为 null</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">getColorOrNull</span><span style="color:#ADBAC7;">(R.styleable.MyView_myType)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 如果 &quot;app:myType&quot; 已被声明于 XML 中，则 myType 的值为 0xFF000000，否则为 0xFF232323</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// myType 的值在任何情况下都可能为 null，不建议使用 !! 来绝对确认其不为 null</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">getColorOrNull</span><span style="color:#ADBAC7;">(R.styleable.MyView_myType, </span><span style="color:#6CB6FF;">0xFF232323</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toInt</span><span style="color:#ADBAC7;">())</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// (推荐) 你可以这样来绝对获得 myType 的值不为 null，保持 defValue 为 null</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myType </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">getColorOrNull</span><span style="color:#ADBAC7;">(R.styleable.MyView_myType) ?: </span><span style="color:#6CB6FF;">0xFF232323</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toInt</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者，你可以在保持 defValue 为 null 时对 myType 为 null 时做出判断</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 不为 null 即用户设置了 &quot;app:myType&quot; 属性</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (myType </span><span style="color:#F47067;">!=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">null</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>系统夜间模式 (Dark Mode) 的功能扩展。</p><p>系统的夜间模式是使用 <code>Configuration.UI_MODE_NIGHT_MASK</code> 进行判断的，为了能让这个功能更加通俗易懂，你无需使用位运算的方式进行判断， 因为通常情况下我们不需要关心当前系统的夜间模式到底处于哪种托管状态，我们只需要知道当前系统外观是否为深色即可。</p><p>所以 <code>BetterAndroid</code> 在 <code>Configuration</code> 中提供了一个直接使用 <code>Boolean</code> 类型进行判断的扩展。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 判断当前系统是否为深色模式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isDarkMode </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.resources.configuration.isUiInNightMode</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统颜色-system-colors" tabindex="-1"><a class="header-anchor" href="#系统颜色-system-colors" aria-hidden="true">#</a> 系统颜色 (System Colors)</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.component.feature/-system-colors" target="_blank" rel="noopener noreferrer">SystemColors<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于系统颜色 (动态主题色) 的扩展。</p></div><p>在 Android 12 中，官方为我们提供了一个新的功能，即动态主题色 (Dynamic Colors)，不同于传统的壁纸取色，Material 3 中的动态主题色是基于壁纸的层级色调进行计算的。</p><p><code>BetterAndroid</code> 将系统提供的主题色封装为了 <code>SystemColors</code>，你可以在代码层面动态地获取到系统的主题色。</p><p>以下是一个创建 <code>SystemColors</code> 并使用的示例。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建 SystemColors 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> systemColors </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> SystemColors.</span><span style="color:#DCBDFB;">from</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#768390;">// 获取系统提供的 android.R.color.system_accent1_100 的颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> accentColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemColors.</span><span style="color:#DCBDFB;">systemAccentPrimary</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取 Material 提供的 com.google.android.material.R.color.material_dynamic_primary50 的颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> primaryColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> systemColors.</span><span style="color:#DCBDFB;">materialDynamicPrimary</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不是每个搭载了 Android 12 的设备都支持动态主题色，你可以使用以下方式进行判断。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 你可以直接判断当前系统是否支持动态主题色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isAvailable </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> SystemColors.isAvailable</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在不支持的情况下在获取颜色时将返回系统提供的默认颜色，但是如果目标设备低于 Android 12，任何从 <code>SystemColors</code> 中获取到的颜色都将会是 <code>Color.TRANSPARENT</code>。</p><p>以下是完整的 <code>SystemColors</code> 支持的颜色方法及其可用参数列表。</p><table><thead><tr><th>方法名称</th><th>可用参数</th></tr></thead><tbody><tr><td><code>systemAccentPrimary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemAccentSecondary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemAccentTertiary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemNeutralPrimary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>systemNeutralSecondary</code></td><td>0、10、50、100、200、300、400、500、600、700、800、900、1000</td></tr><tr><td><code>materialDynamicPrimary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicSecondary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicTertiary</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicNeutral</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr><tr><td><code>materialDynamicNeutralVariant</code></td><td>0、10、20、30、40、50、60、70、80、90、95、99、100</td></tr></tbody></table><div class="custom-container danger"><p class="custom-container-title">特别注意</p><p>你仅能在给出的方法中传入上述所列出可用参数中的数值，其它数值均不支持，否则将会抛出异常。</p></div><h3 id="颜色-color-扩展" tabindex="-1"><a class="header-anchor" href="#颜色-color-扩展" aria-hidden="true">#</a> 颜色 (Color) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-attr-state" target="_blank" rel="noopener noreferrer">AttrState<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>基于 <code>ColorStateList</code> 的颜色状态。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/is-bright-color" target="_blank" rel="noopener noreferrer">Color → isBrightColor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-hex-color" target="_blank" rel="noopener noreferrer">Color → toHexColor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-alpha-color" target="_blank" rel="noopener noreferrer">Color → toAlphaColor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/mix-color-of" target="_blank" rel="noopener noreferrer">Color → mixColorOf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-normal-color-state-list" target="_blank" rel="noopener noreferrer">Color → toNormalColorStateList<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/to-nullable-color-state-list" target="_blank" rel="noopener noreferrer">Color → toNullableColorStateList<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-color-state-list" target="_blank" rel="noopener noreferrer">Color → ColorStateList<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于颜色的扩展。</p></div><p>颜色在 Android 中是以 <code>Integer</code> (整型) 的形式存在的，虽然存在一个名为 <code>Color</code> 的类对其进行封装，但是很多方法都是在高版本的系统中添加的且 <code>androidx</code> 也没有针对其特定的兼容实现， 在代码上下文中传递的对象通常也是直接使用 <code>Integer</code>。</p><p><code>BetterAndroid</code> 没有理由且无任何必要重新设计一个封装类来管理颜色，于是 <code>BetterAndroid</code> 仅针对 <code>Integer</code> 类型提供了相关扩展。</p><p>所有在方法中传递的颜色对象都会被标注 <code>@ColorInt</code> 注解，请你也遵守 <code>androidx</code> 提供的规范。</p><p>下面是一些对颜色扩展的相关示例用法。</p><p>判断颜色的明亮程度。</p><p>这在你需要根据颜色的明亮程度来决定是否使用深色文字时非常有用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 要判断其明亮程度，你只需要使用以下方法</span></span>
<span class="line"><span style="color:#768390;">// 你肯定会得到一个 true，因为这是一个白色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isBright </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.isBrightColor</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将颜色转换为 HEX 字符串。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 要将其转换为 HEX 字符串，你只需要使用以下方法</span></span>
<span class="line"><span style="color:#768390;">// 将会得到一个包含透明度的 &quot;#FFFFFFFF&quot;</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hexString </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toHexColor</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置当前颜色的透明度。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用 0f-1f 的浮点数来设置透明度</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> alphaColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toAlphaColor</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0.5f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以使用 0-255 的整数来设置透明度</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> alphaColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toAlphaColor</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">127</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>混合两个颜色。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color1 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color2 </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.BLACK</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用以下方法非常简单地将它们进行混合</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> mixColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">mixColorOf</span><span style="color:#ADBAC7;">(color1, color2)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以设置混合的比率，默认为 0.5f</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> mixColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">mixColorOf</span><span style="color:#ADBAC7;">(color1, color2, </span><span style="color:#6CB6FF;">0.2f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 也同样为 <code>ColorStateList</code> 提供了一些扩展功能。</p><p>你可以使用以下方式快速地将现有颜色转换为一个拥有默认颜色的 <code>ColorStateList</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设我们有以下颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> color </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.WHITE</span></span>
<span class="line"><span style="color:#768390;">// 使用以下方法将其转换为一个拥有默认颜色的 ColorStateList</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toNormalColorStateList</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你还可以转换为一个在颜色为透明时返回 null 的 ColorStateList</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> color.</span><span style="color:#DCBDFB;">toNullableColorStateList</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以通过 <code>AttrState</code> 手动创建一个 <code>ColorStateList</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> colorStateList </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ColorStateList</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.CHECKED to Color.WHITE,</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.PRESSED to Color.BLACK,</span></span>
<span class="line"><span style="color:#ADBAC7;">    AttrState.NORMAL to Color.TRANSPARENT</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="位图-bitmap-扩展" tabindex="-1"><a class="header-anchor" href="#位图-bitmap-扩展" aria-hidden="true">#</a> 位图 (Bitmap) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/decode-to-bitmap" target="_blank" rel="noopener noreferrer">Bitmap → decodeToBitmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/decode-to-bitmap-or-null" target="_blank" rel="noopener noreferrer">Bitmap → decodeToBitmapOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/create-bitmap" target="_blank" rel="noopener noreferrer">Bitmap → createBitmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/create-bitmap-or-null" target="_blank" rel="noopener noreferrer">Bitmap → createBitmapOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/write-bitmap" target="_blank" rel="noopener noreferrer">Bitmap → writeBitmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/compress-bitmap" target="_blank" rel="noopener noreferrer">Bitmap → compressBitmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/blur" target="_blank" rel="noopener noreferrer">Bitmap → blur<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/round" target="_blank" rel="noopener noreferrer">Bitmap → round<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/shrink" target="_blank" rel="noopener noreferrer">Bitmap → shrink<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/reduce" target="_blank" rel="noopener noreferrer">Bitmap → reduce<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于位图的扩展。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics.base/-bitmap-blur-factory" target="_blank" rel="noopener noreferrer">BitmapBlurFactory<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于位图模糊的扩展。</p></div><p>在 Android 中，位图能够用到各种地方，它是用来显示图片的重要对象。</p><p><code>BetterAndroid</code> 为位图提供了从装载到对其进行转换、缩放、压缩以及模糊等一系列扩展功能。</p><p>在装载位图时，你可以不再需要使用 <code>BitmapFactory</code>，现在有以下方式可以帮助你更加方便地完成这个操作。</p><p>通过文件 <code>File</code> 对象或输入流 <code>InputStream</code> 对象装载位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设你的图片位于这个路径</span></span>
<span class="line"><span style="color:#768390;">// 注意这个路径仅用于演示，实际情况下需要访问内置存储中的文件</span></span>
<span class="line"><span style="color:#768390;">// 你需要申请各种各样不同的权限且应当使用 Environment.getExternalStorageDirectory() 方法来获取路径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imageFile </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">File</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 通过文件路径创建文件输入流</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> inputStream </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">FileInputStream</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 通过文件对象装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> imageFile.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 你可以在方法参数中传入 BitmapFactory.Options 对象来对其进行配置</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> imageFile.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">(BitmapFactory.</span><span style="color:#DCBDFB;">Options</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">apply</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">})</span></span>
<span class="line"><span style="color:#768390;">// 通过输入流装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> inputStream.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过字节数组 <code>ByteArray</code> 装载位图。</p><p>如果你有一个通过 Base64 编码的图片，你可以将其转换为字节数组并使用以下方式装载位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Base64 字符串</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> base64String </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAA...&quot;</span></span>
<span class="line"><span style="color:#768390;">// 将 Base64 字符串转换为字节数组</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> byteArray </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Base64.</span><span style="color:#DCBDFB;">decode</span><span style="color:#ADBAC7;">(base64String, Base64.DEFAULT)</span></span>
<span class="line"><span style="color:#768390;">// 通过字节数组装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> byteArray.</span><span style="color:#DCBDFB;">decodeToBitmap</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <code>Resources</code> 对象装载位图。</p><p>此操作实际上是通过已知的 <code>Drawable</code> 资源 ID 创建一个新的 <code>Bitmap</code> 对象。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Resources</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> resources: </span><span style="color:#F69D50;">Resources</span></span>
<span class="line"><span style="color:#768390;">// 通过资源 ID 装载位图</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> resources.</span><span style="color:#DCBDFB;">createBitmap</span><span style="color:#ADBAC7;">(R.drawable.my_image)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>在不确定位图能否装载成功时，你可以将装载的方法替换为 <code>decodeToBitmapOrNull</code> 及 <code>createBitmapOrNull</code>，这样在装载失败时将会返回 <code>null</code> 而不是抛出异常。</p></div><p>位图装载到内存后或是内存中存在的位图对象，你可以将其重新保存到文件。</p><p>针对 <code>File</code> 对象 Kotlin 的 stdlib 已经给出了一个 <code>File.writeText</code> 的方法，所以 <code>BetterAndroid</code> 仿照其提供了一个 <code>File.writeBitmap</code> 方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你要保存到的文件</span></span>
<span class="line"><span style="color:#768390;">// 注意这个路径仅用于演示，实际情况下需要访问内置存储中的文件</span></span>
<span class="line"><span style="color:#768390;">// 你需要申请各种各样不同的权限且应当使用 Environment.getExternalStorageDirectory() 方法来获取路径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> imageFile </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">File</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/storage/emulated/0/DCIM/Camera/IMG_20210901_000000_modified.jpg&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 将位图保存到文件</span></span>
<span class="line"><span style="color:#ADBAC7;">imageFile.</span><span style="color:#DCBDFB;">writeBitmap</span><span style="color:#ADBAC7;">(bitmap)</span></span>
<span class="line"><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#768390;">// 默认为 JPEG 格式，质量为 100</span></span>
<span class="line"><span style="color:#ADBAC7;">imageFile.</span><span style="color:#DCBDFB;">writeBitmap</span><span style="color:#ADBAC7;">(bitmap, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.PNG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你能实际得到一个 <code>OutputStream</code> 对象，你可以使用以下方式将位图写入到输出流中。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的输出流对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> outputStream: </span><span style="color:#F69D50;">OutputStream</span></span>
<span class="line"><span style="color:#768390;">// 使用 use 方法来自动关闭输出流</span></span>
<span class="line"><span style="color:#ADBAC7;">outputStream.</span><span style="color:#DCBDFB;">use</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 将位图写入到输出流中</span></span>
<span class="line"><span style="color:#ADBAC7;">    it.</span><span style="color:#DCBDFB;">compressBitmap</span><span style="color:#ADBAC7;">(bitmap)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 默认为 JPEG 格式，质量为 100</span></span>
<span class="line"><span style="color:#ADBAC7;">    it.</span><span style="color:#DCBDFB;">compressBitmap</span><span style="color:#ADBAC7;">(bitmap, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.PNG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是针对位图的缩放、压缩以及模糊等扩展功能。</p><p>缩放位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 以倍数缩放，默认为 2 倍</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> scaledBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">reduce</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>压缩位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图压缩为 100 KB 的大小</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> shrinkedBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">shrink</span><span style="color:#ADBAC7;">(maxSize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以调整 format 和 quality 参数来对其进行配置</span></span>
<span class="line"><span style="color:#768390;">// 默认为 JPEG 格式，质量为 100</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> shrinkedBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">shrink</span><span style="color:#ADBAC7;">(maxSize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100f</span><span style="color:#ADBAC7;">, format </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Bitmap.CompressFormat.PNG, quality </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>圆角化位图。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图设置以 10dp 为半径的圆角</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> roundBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">round</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 你还可以处理后的位图背景颜色，默认为纯白</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> roundBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">round</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), backgroundColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.BLACK)</span></span>
<span class="line"><span style="color:#768390;">// 你还可以设置每个角的圆角半径</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> roundBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">round</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    topLeft </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">12</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    topRight </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">15</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottomLeft </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context),</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottomRight </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">9</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context)</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模糊位图，你也可以使用 <code>BitmapBlurFactory</code> 来完成。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的位图对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> bitmap: </span><span style="color:#F69D50;">Bitmap</span></span>
<span class="line"><span style="color:#768390;">// 将位图以 25 模糊度进行模糊</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> blurBitmap </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> bitmap.</span><span style="color:#DCBDFB;">blur</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">25</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里提供的模糊只是一个通用算法，它能够快速实现模糊效果，但在速度和性能上可能会存在问题，且无法用于动态模糊效果。</p><p>在 Android 中的位图模糊效果你可以参考并使用其它可能的第三方库，目前并没有一个通用且完善的解决方案，这是 Android 中的历史遗留问题，<code>BetterAndroid</code> 没有理由且无任何必要特意封装针对位图模糊的相关功能。</p><p>如果你的应用程序目标为 Android 12 及以上版本，我们建议使用官方提供的 <code>RenderEffect</code> 来进行模糊操作，<s>在以下版本中使用 <code>RenderScript</code> 的替代品 <a href="https://github.com/android/renderscript-intrinsics-replacement-toolkit" target="_blank" rel="noopener noreferrer">renderscript-intrinsics-replacement-toolkit<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></s> (已归档)。</p></div><h3 id="可绘制-drawable-扩展" tabindex="-1"><a class="header-anchor" href="#可绘制-drawable-扩展" aria-hidden="true">#</a> 可绘制 (Drawable) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/-gradient-drawable-compat" target="_blank" rel="noopener noreferrer">GradientDrawableCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><code>GradientDrawable</code> 的兼容处理类。</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/set-padding-compat" target="_blank" rel="noopener noreferrer">Drawable → setPaddingCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/set-padding" target="_blank" rel="noopener noreferrer">Drawable → setPadding<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.graphics/update-padding" target="_blank" rel="noopener noreferrer">Drawable → updatePadding<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Drawable</code> 的扩展。</p></div><p>在一些情况下，我们可能需要用到直接操作 <code>Drawable</code> 对象的场景，<code>BetterAndroid</code> 为此提供了一些可能用到的扩展功能。</p><p>为支持的 <code>Drawable</code> 设置 <code>padding</code>。</p><p>你可以在任何类型的 <code>Drawable</code> 上使用以下方式设置 <code>padding</code>，但是仅对以下类型的 <code>Drawable</code> 有效：</p><p><code>RippleDrawable</code>、<code>LayerDrawable</code>、<code>ShapeDrawable</code>、<code>GradientDrawable</code></p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Drawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable: </span><span style="color:#F69D50;">Drawable</span></span>
<span class="line"><span style="color:#768390;">// 为支持的 Drawable 设置 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPadding</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 或者更新指定边的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为 <code>GradientDrawable</code> 设置 <code>padding</code> 并进行兼容处理。</p><p>支持在代码层面设置 <code>padding</code> 的 <code>GradientDrawable</code> 仅在 Android 10 及以上版本中可用。</p><p>你可以使用以下兼容方式为 <code>GradientDrawable</code> 设置 <code>padding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 GradientDrawable 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> drawable: </span><span style="color:#F69D50;">GradientDrawable</span></span>
<span class="line"><span style="color:#768390;">// 设置 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPaddingCompat</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 或者使用上述提到的设置方法一次性设置所有边的 padding</span></span>
<span class="line"><span style="color:#768390;">// 这个方法会自动为你对接到 setPaddingCompat</span></span>
<span class="line"><span style="color:#ADBAC7;">drawable.</span><span style="color:#DCBDFB;">setPadding</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是请注意，在 Android 10 及以下版本中，你需要使用 <code>GradientDrawableCompat</code> 来创建 <code>GradientDrawable</code> 才能使 <code>padding</code> 生效。</p><p>你还可以继承 <code>GradientDrawableCompat</code> 来实现自己的 <code>GradientDrawable</code>。</p><h3 id="toast-扩展" tabindex="-1"><a class="header-anchor" href="#toast-扩展" aria-hidden="true">#</a> Toast 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/toast" target="_blank" rel="noopener noreferrer">Toast → toast<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Toast</code> 的扩展。</p></div><p>Android 中的 <code>Toast</code> 使用场景非常广泛，但是其存在各种各样的使用问题。</p><p>在早些时候 <code>androidx</code> 的 <code>ktx</code> 为 <code>Toast</code> 提供了一个 <code>Context.toast</code> 的扩展方法，但是后期因为通知权限的问题被移除， 有关此问题的讨论可以参考 <a href="https://github.com/android/android-ktx/issues/143" target="_blank" rel="noopener noreferrer">Toast extensions on Context<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p><p>在 Kotlin 中简化一个 <code>Toast</code> 的使用方式应该是非常有必要的，因为有时候显示信息最快的方式还是弹出一个 <code>Toast</code>。</p><p>所以 <code>BetterAndroid</code> 重新为此提供了一个 <code>toast</code> 的扩展方法，你可以在以下实例或是被其继承的实例中使用它：</p><p><code>Context</code>、<code>Window</code>、<code>Fragment</code>、<code>View</code>、<code>Dialog</code></p><p>你可以非常简单地使用以下方式弹出一个 <code>Toast</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 弹出一个 Toast</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以在方法参数中传入 Toast.LENGTH_SHORT 或 Toast.LENGTH_LONG 来设置显示时长</span></span>
<span class="line"><span style="color:#768390;">// 默认为 Toast.LENGTH_SHORT</span></span>
<span class="line"><span style="color:#ADBAC7;">context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">, Toast.LENGTH_SHORT)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上就是它的全部使用方式，<code>BetterAndroid</code> 没有继续对其做出自定义操作，因为自定义功能在后期也被 Android 进行了限制， 请参考 <a href="https://developer.android.com/about/versions/11/behavior-changes-11#custom-toasts-bg-blocked" target="_blank" rel="noopener noreferrer">Custom toasts from the background are blocked<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p><p><code>Toast</code> 仅能在主线程中使用，如果要在任何线程中弹出一个 <code>Toast</code>，你只需要像下面这样简单地对其进行配置。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Context</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 创建一个新的线程</span></span>
<span class="line"><span style="color:#DCBDFB;">Thread</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 延迟 1 秒</span></span>
<span class="line"><span style="color:#ADBAC7;">    Thread.</span><span style="color:#DCBDFB;">sleep</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1000</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 弹出一个 Toast 并设置 allowBackground 为 true</span></span>
<span class="line"><span style="color:#ADBAC7;">    context.</span><span style="color:#DCBDFB;">toast</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">, allowBackground </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">}.</span><span style="color:#DCBDFB;">start</span><span style="color:#ADBAC7;">() </span><span style="color:#768390;">// 启动它</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，你就能在任何线程的情况下弹出一个 <code>Toast</code>，需要注意的是，这个参数在默认情况下是 <code>false</code>，你需要手动设置它。</p><p>你应该尽量避免在非主线程中弹出 <code>Toast</code>，因为这样可能会导致一些可能的 “黑盒问题” 以及未知的隐患。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>正如上面所说，在 Android 13 及以上系统中，你需要为 <code>Toast</code> 与通知一样定义并添加运行时权限。</p><p>类似 MIUI 等一些第三方 ROM 可能会允许在没有权限的情况下在应用程序内部弹出 <code>Toast</code>。</p><p>如果没有悬浮窗需求，一个好的建议是使用一些其它类似行为的方式来替代 <code>Toast</code>，例如使用 Material 组件提供的 <code>Snackbar</code>。</p><p>请参考 <a href="https://developer.android.com/develop/ui/views/notifications/notification-permission" target="_blank" rel="noopener noreferrer">Notification runtime permission<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a>。</p></div><h3 id="window-扩展" tabindex="-1"><a class="header-anchor" href="#window-扩展" aria-hidden="true">#</a> Window 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-layout-params" target="_blank" rel="noopener noreferrer">Window → updateLayoutParams<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-screen-brightness" target="_blank" rel="noopener noreferrer">Window → updateScreenBrightness<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/clear-screen-brightness" target="_blank" rel="noopener noreferrer">Window → clearScreenBrightness<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>Window</code> 的扩展。</p></div><p><code>BetterAndroid</code> 为 <code>Window</code> 提供了一些可能用到的扩展功能。</p><p>你可以像使用 <code>androidx</code> 中的 <code>View.updateLayoutParams</code> 一样使用以下方式修改 <code>Window.attributes</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 修改 Window.attributes 中的参数</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateLayoutParams</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    gravity </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Gravity.CENTER</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// ...</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 还封装了为 <code>Window</code> 单独设置屏幕亮度的方法。</p><p>你可以使用以下方式更方便地修改 <code>Window.attributes.screenBrightness</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 为当前 Window 设置屏幕亮度 (0-100)</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateScreenBrightness</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你也可以使用 Float 类型的参数来设置屏幕亮度</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">updateScreenBrightness</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0.5f</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要还原系统提供的默认屏幕亮度，你可以使用以下方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 Window 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> window: </span><span style="color:#F69D50;">Window</span></span>
<span class="line"><span style="color:#768390;">// 清除已设置的屏幕亮度</span></span>
<span class="line"><span style="color:#ADBAC7;">window.</span><span style="color:#DCBDFB;">clearScreenBrightness</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="view-扩展" tabindex="-1"><a class="header-anchor" href="#view-扩展" aria-hidden="true">#</a> View 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/location" target="_blank" rel="noopener noreferrer">View → location<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/tag" target="_blank" rel="noopener noreferrer">View → tag<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/get-tag" target="_blank" rel="noopener noreferrer">View → getTag<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/parent" target="_blank" rel="noopener noreferrer">View → parent<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/parent-or-null" target="_blank" rel="noopener noreferrer">View → parentOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/child" target="_blank" rel="noopener noreferrer">View → child<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/child-or-null" target="_blank" rel="noopener noreferrer">View → childOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/first-child" target="_blank" rel="noopener noreferrer">View → firstChild<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/last-child" target="_blank" rel="noopener noreferrer">View → lastChild<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/first-child-or-null" target="_blank" rel="noopener noreferrer">View → firstChildOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/last-child-or-null" target="_blank" rel="noopener noreferrer">View → lastChildOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/remove-self" target="_blank" rel="noopener noreferrer">View → removeSelf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/remove-self-in-layout" target="_blank" rel="noopener noreferrer">View → removeSelfInLayout<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/tooltip-text-compat" target="_blank" rel="noopener noreferrer">View → tooltipTextCompat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/animate" target="_blank" rel="noopener noreferrer">View → animate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/show-ime" target="_blank" rel="noopener noreferrer">View → showIme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/hide-ime" target="_blank" rel="noopener noreferrer">View → hideIme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/perform-key-pressed" target="_blank" rel="noopener noreferrer">View → performKeyPressed<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/perform-touch" target="_blank" rel="noopener noreferrer">View → performTouch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/set-interval-on-click-listener" target="_blank" rel="noopener noreferrer">View → setIntervalOnClickListener<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-padding" target="_blank" rel="noopener noreferrer">View → updatePadding<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-margins" target="_blank" rel="noopener noreferrer">View → updateMargins<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-margins-relative" target="_blank" rel="noopener noreferrer">View → updateMarginsRelative<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/set-margins" target="_blank" rel="noopener noreferrer">View → setMargins<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/walk-to-root" target="_blank" rel="noopener noreferrer">View → walkToRoot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/walk-through-children" target="_blank" rel="noopener noreferrer">View → walkThroughChildren<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/index-of-in-parent" target="_blank" rel="noopener noreferrer">View → indexOfInParent<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/outline-provider" target="_blank" rel="noopener noreferrer">View → outlineProvider<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-view-layout-params.html" target="_blank" rel="noopener noreferrer">View → ViewLayoutParams<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-layout-params-match-parent" target="_blank" rel="noopener noreferrer">View → LayoutParamsMatchParent<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/-layout-params-wrap-content" target="_blank" rel="noopener noreferrer">View → LayoutParamsWrapContent<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>View</code> 的扩展。</p></div><p><code>View</code> 是用户界面中的重要组成部分，在使用 Kotlin 时，<code>androidx</code> 为我们提供了关于 <code>View</code> 的扩展功能，但是依然不够完善。</p><p><code>BetterAndroid</code> 在 <code>androidx</code> 的相关扩展功能基础上进行了完善和丰富，下面是你能够用到的一些扩展功能。</p><p>获取 <code>View</code> 在屏幕中的坐标。</p><p>你可以通过以下方式获取到一个 <code>Point</code> 对象，它包含了 <code>View</code> 在屏幕中的坐标。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取 View 在屏幕中的坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> location </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.location</span></span>
<span class="line"><span style="color:#768390;">// X 坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> x </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> location.x</span></span>
<span class="line"><span style="color:#768390;">// Y 坐标</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> y </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> location.y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取当前 <code>View</code> 的标签 (Tag)。</p><p>在传统写法中，我们需要使用 <code>View.getTag</code> 获取到标签对象，然后使用 <code>as</code> 转换为我们需要的类型。</p><p>这种写法看起来非常麻烦，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 指定标签的类型 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#768390;">// 返回结果可为 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> tag </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">tag</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">String</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 指定标签的类型和 ID (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#768390;">// 返回结果可为 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> tag </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">getTag</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">String</span><span style="color:#ADBAC7;">&gt;(R.id.my_tag)</span></span>
<span class="line"><span style="color:#768390;">// 指定标签的类型和 ID 并设置默认值 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#768390;">// 返回结果不会为 null，如果类型错误或标签不存在，将会返回默认值</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> tag </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">getTag</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">String</span><span style="color:#ADBAC7;">&gt;(R.id.my_tag, </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取当前 <code>View</code> 的父布局。</p><p>在传统写法中，我们需要使用 <code>View.parent</code> 获取到 <code>ViewParent</code> 对象，然后使用 <code>as</code> 转换为 <code>ViewGroup</code> 以获取到父布局对象。</p><p>这种写法看起来非常麻烦，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 View 的父布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent: </span><span style="color:#F69D50;">ViewGroup</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parent</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 指定父布局的类型 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parent</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 在不确定父布局是否存在的情况下，你还可以使用以下方式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">parentOrNull</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取当前 <code>ViewGroup</code> 的子布局。</p><p>在传统写法中，我们需要使用 <code>ViewGroup.getChildAt</code> 获取到 <code>View</code> 对象，然后使用 <code>as</code> 转换为 <code>View</code> 以获取到子布局对象。</p><p>这种写法看起来同样非常麻烦，于是 <code>BetterAndroid</code> 也此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> viewGroup: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 指定子布局的类型 (如果类型是已知且确定的)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">Button</span><span style="color:#ADBAC7;">&gt;(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的第一个子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> firstChild: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.firstChild</span></span>
<span class="line"><span style="color:#768390;">// 获取当前 ViewGroup 的最后一个子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lastChild: </span><span style="color:#F69D50;">View</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.lastChild</span></span>
<span class="line"><span style="color:#768390;">// 在不确定子布局是否存在的情况下，你还可以使用以下方式</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> child </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">childOrNull</span><span style="color:#ADBAC7;">(index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> firstChild </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.firstChildOrNull</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> lastChild </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.lastChildOrNull</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从父布局 (容器) 中移除自身。</p><p>通常情况下，我们从父布局中移除 <code>View</code> 自身需要使用 <code>View.getParent</code> 获取到父布局对象，然后转换为 <code>ViewGroup</code>，最后调用 <code>ViewGroup.removeView</code> 方法。</p><p>现在，你可以使用以下方式更加简单地从父布局中移除其自身，如果不存在父布局或是父布局不是 <code>ViewGroup</code> (这种情况一般是不存在的)，此方法将无任何作用且不需要担心会产生任何负面效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 从父布局中移除自身</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeSelf</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 使用 ViewGroup.removeViewInLayout 方法移除自身</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">removeSelfInLayout</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置工具提示文本 (向下兼容)。</p><p>在 Android 8.0 (26) 及以上版本中，你可以使用 <code>View.tooltipText</code> 来设置工具提示文本，<code>androidx</code> 所提供的 <code>ViewCompat.setTooltipText</code> 虽然支持在低于 26 的版本中使用，但是低于 26 版本将无效， 这并没有实质解决这个问题。</p><p>所以 <code>BetterAndroid</code> 为此提供了一个 <code>View.tooltipTextCompat</code> 方法，它会在低版本系统中使用 <code>Toast</code> 来模拟工具提示文本并且可以重新获取你设置的文本。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置工具提示文本</span></span>
<span class="line"><span style="color:#ADBAC7;">view.tooltipTextCompat </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#768390;">// 获取工具提示文本</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> tooltipText </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.tooltipTextCompat</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建动画。</p><p><code>BetterAndroid</code> 为 <code>View</code> 提供了 <code>animate</code> 方法的 lambda 实现，它将自动调用 <code>start</code> 方法，你可以使用它来创建一些简单的动画效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 创建动画</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">animate</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>显示或隐藏输入法 (IME)。</p><p>通常情况下控制输入法的显示和隐藏可以通过输入框的焦点来自动完成，但是一些情况下我们希望能够手动控制输入法的显示和隐藏。</p><p>如果当前 <code>View</code> 在 <code>Activity</code> 中，你可以使用以下方式显示或隐藏输入法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 显示输入法</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">showIme</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 隐藏输入法</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">hideIme</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 Android 11 及以上版本中，以上方法会使用 <code>WindowInsetsController</code> 来控制输入法的显示和隐藏， 在 <code>View</code> 不处于 <code>Activity</code> 中或当前 Android 版本低于 Android 11 时，将会使用 <code>InputMethodManager</code> 来控制输入法的显示和隐藏。</p><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>如果你需要使用拖拽来控制输入法的显示或隐藏 (Window Insets 动画效果)，目前 <code>BetterAndroid</code> 暂时没有提供相关的扩展功能， 你可以参考 <a href="https://developer.android.com/reference/android/view/WindowInsetsAnimationController" target="_blank" rel="noopener noreferrer">WindowInsetsAnimationController<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 自己实现。</p></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在 Android 11 及以上版本中，建议将 <code>Activity</code> 的 <code>android:windowSoftInputMode</code> 参数设置为 <code>adjustResize</code> 以便于更好地控制输入法的显示和隐藏。</p><p>如果你的 <code>View</code> 不处于 <code>Activity</code> 中或当前 Android 版本低于 11，以上方案可能在一定条件下会无效。</p><p>在 <code>Activity</code> 首次启动时，建议为显示或隐藏输入法事件进行延迟处理，否则可能会无效，且显示和隐藏事件的间隔不应过短。</p></div><p>模拟触摸事件 (Touch)。</p><p><code>View</code> 提供的 <code>performClick</code> 方法仅能模拟点击事件，如果你需要模拟触摸事件，你可以使用 <code>BetterAndroid</code> 提供的 <code>View.performTouch</code> 方法。</p><p>这个方法所接受的参数如下表所示。</p><table><thead><tr><th>参数名称</th><th>参数类型</th><th>参数说明</th></tr></thead><tbody><tr><td><code>downX</code></td><td><code>Float</code></td><td>模拟触摸事件的按下 X 坐标</td></tr><tr><td><code>downY</code></td><td><code>Float</code></td><td>模拟触摸事件的按下 Y 坐标</td></tr><tr><td><code>upX</code></td><td><code>Float</code></td><td>模拟触摸事件的抬起 X 坐标</td></tr><tr><td><code>upY</code></td><td><code>Float</code></td><td>模拟触摸事件的抬起 Y 坐标</td></tr><tr><td><code>duration</code></td><td><code>Long</code></td><td>模拟触摸事件的持续时间 (从按下到抬起)，单位为毫秒</td></tr></tbody></table><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 模拟从 (15, 30) 到 (105, 130) 的触摸事件，持续 500 毫秒</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performTouch</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">15f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">30f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">105f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">130f</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">500</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模拟按键事件。</p><p>你可以模拟物理键盘或输入法 (IME) 发送给当前 <code>View</code> 的按键事件，例如在 <code>EditText</code> 中，你可以模拟按下退格键来删除文本。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 模拟按下退格键</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performKeyPressed</span><span style="color:#ADBAC7;">(KeyEvent.KEYCODE_DEL)</span></span>
<span class="line"><span style="color:#768390;">// 你可以在后方加入 duration 参数来设置持续时间 (从按下到抬起)，单位为毫秒</span></span>
<span class="line"><span style="color:#768390;">// 默认为 150 毫秒</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">performKeyPressed</span><span style="color:#ADBAC7;">(KeyEvent.KEYCODE_DEL, duration </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">500</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置间隔点击事件。</p><p><code>View</code> 提供的 <code>setOnClickListener</code> 方法设置的点击事件可能在短时间内被多次触发造成误操作，针对这种情况，<code>BetterAndroid</code> 为你提供了 <code>setIntervalOnClickListener</code> 方法。</p><p>在指定的间隔时间内，点击事件重复触发将被忽略。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置间隔点击事件</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">setIntervalOnClickListener</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 你可以在方法参数中传入 timeMillis 参数来设置点击事件的间隔时间，单位为毫秒</span></span>
<span class="line"><span style="color:#768390;">// 默认为 300 毫秒</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">setIntervalOnClickListener</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1000</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Your code here.</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>View</code> 的 <code>padding</code> 和 <code>margin</code>。</p><p><code>androidx</code> 提供了一个 <code>View.updatePadding</code> 方法，<code>BetterAndroid</code> 在此基础上提供了可更新横向和纵向方向的方法，如果你只需要更新这两个方向的 <code>padding</code>，你可以无需写两遍重复数值。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 更新横向方向的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新纵向方向的 padding</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updatePadding</span><span style="color:#ADBAC7;">(vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>BetterAndroid</code> 同样提供了一个 <code>View.updateMargins</code> 和 <code>View.setMargins</code> 方法，它的使用方式与 <code>View.updatePadding</code> 相同。</p><p>这个方法仅会在 <code>View</code> 的 <code>LayoutParams</code> 为 <code>MarginLayoutParams</code> 时生效，其它情况下均不会有任何作用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 更新横向方向的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargins</span><span style="color:#ADBAC7;">(horizontal </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新纵向方向的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargins</span><span style="color:#ADBAC7;">(vertical </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新左侧的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMargins</span><span style="color:#ADBAC7;">(left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 更新起始的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">updateMarginsRelative</span><span style="color:#ADBAC7;">(start </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 设置四个边的 margin</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">setMargins</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>遍历父布局以及所有子布局。</p><p>通常情况下，我们需要使用 <code>View.parent</code> 方法递归遍历父布局，使用 <code>ViewGroup.children</code> 方法递归遍历子布局。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，它的设计灵感来源于 Kotlin 提供的 <code>File</code> 中的 <code>walk</code> 扩展方法。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> viewGroup: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 获取所有父布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> parents </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">walkToRoot</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#768390;">// 获取所有子布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> children </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> viewGroup.</span><span style="color:#DCBDFB;">walkThroughChildren</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取 <code>View</code> 在父布局中的索引。</p><p>在传统写法中，我们需要使用 <code>ViewGroup.indexOfChild</code> 获取到 <code>View</code> 在父布局中的索引。</p><p>这种写法看起来不是很友好，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 获取 View 在父布局中的索引</span></span>
<span class="line"><span style="color:#768390;">// 如果不存在父布局将会返回 -1</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> index </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view.</span><span style="color:#DCBDFB;">indexOfInParent</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>View</code> 的 <code>outlineProvider</code> (外轮廓提供者)。</p><p><code>View</code> 的 <code>outlineProvider</code> 用于设置 <code>View</code> 的外轮廓，它的类型为 <code>ViewOutlineProvider</code>。</p><p>在 Kotlin 中，我们需要使用 <code>view.outlineProvider = object : ViewOutlineProvider()</code> 的方式进行设置，这看起来并不友好。</p><p>于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 设置 View 的 outlineProvider</span></span>
<span class="line"><span style="color:#ADBAC7;">view.</span><span style="color:#DCBDFB;">outlineProvider</span><span style="color:#ADBAC7;"> { view, outline </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 例如，你可以在此处设置圆形的外轮廓</span></span>
<span class="line"><span style="color:#ADBAC7;">    outline.</span><span style="color:#DCBDFB;">setOval</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, view.width, view.height)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// 或者你可以在此处设置圆角矩形的外轮廓</span></span>
<span class="line"><span style="color:#ADBAC7;">    outline.</span><span style="color:#DCBDFB;">setRoundRect</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, view.width, view.height, </span><span style="color:#6CB6FF;">10f</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#768390;">// 记得在设置 outlineProvider 之后设置 clipToOutline 为 true</span></span>
<span class="line"><span style="color:#ADBAC7;">view.clipToOutline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动创建一个 <code>LayoutParams</code> 对象。</p><p><code>LayoutParams</code> 是 <code>View</code> 的布局参数，它的类型取决于 <code>View</code> 的父布局，例如 <code>LinearLayout</code> 的 <code>LayoutParams</code> 为 <code>LinearLayout.LayoutParams</code>。</p><p>有时候，你可能需要有手动创建这个对象并设置到 <code>View</code> 中的需求，此时 <code>BetterAndroid</code> 提供了 <code>ViewLayoutParams</code> 方法， 现在，你可以省去使用超级长的 <code>ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)</code> 创建对象的步骤。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 View 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 创建一个 LinearLayout.LayoutParams 对象，默认情况下 width 和 height 均为 WRAP_CONTENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 同时设置 width 和 height 为 MATCH_PARENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(marchParent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 仅设置 width 为 MATCH_PARENT</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(widthMatchParent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 手动设置 width 和 height</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewLayoutParams</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">.</span><span style="color:#F69D50;">LayoutParams</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#6CB6FF;">50</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context), </span><span style="color:#6CB6FF;">30</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">toPx</span><span style="color:#ADBAC7;">(context))</span></span>
<span class="line"><span style="color:#768390;">// 设置到 View 中</span></span>
<span class="line"><span style="color:#ADBAC7;">view.layoutParams </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> layoutParams</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="layoutinflater-扩展" tabindex="-1"><a class="header-anchor" href="#layoutinflater-扩展" aria-hidden="true">#</a> LayoutInflater 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/layout-inflater" target="_blank" rel="noopener noreferrer">LayoutInflater → layoutInflater<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/inflate" target="_blank" rel="noopener noreferrer">LayoutInflater → inflate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/inflate-or-null" target="_blank" rel="noopener noreferrer">LayoutInflater → inflateOrNull<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>LayoutInflater</code> 的扩展。</p></div><p>通常情况下我们可以在 <code>Activity</code> 中使用 <code>getLayoutInflater</code> 或使用 <code>LayoutInflater.from(context)</code> 来创建一个 <code>LayoutInflater</code> 对象，然后使用 <code>inflate</code> 方法来装载布局。</p><p><code>BetterAndroid</code> 为你简化了这一步骤，现在，你能够在 <code>Context</code> 中使用 <code>layoutInflater</code> 获取到 <code>LayoutInflater</code> 对象，然后使用 <code>inflate</code> 方法来装载布局。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 ViewGroup 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">ViewGroup</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 Context 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> context: </span><span style="color:#F69D50;">Context</span></span>
<span class="line"><span style="color:#768390;">// 你可以在 ViewGroup 中使用以下方式装载布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view)</span></span>
<span class="line"><span style="color:#768390;">// 你可以设置 attachToRoot 参数来决定是否同时将其添加到 ViewGroup 中</span></span>
<span class="line"><span style="color:#768390;">// 如果 root 不为 null，attachToRoot 默认为 true</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view, attachToRoot </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 你可以将装载后的布局转换为指定的类型而无需再写一个 &quot;as&quot;</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">&gt;(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view)</span></span>
<span class="line"><span style="color:#768390;">// 你可以使用重载函数以确保装载的布局类型正确，装载失败或类型错误将返回 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> myView </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> context.layoutInflater.</span><span style="color:#DCBDFB;">inflateOrNull</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayout</span><span style="color:#ADBAC7;">&gt;(R.layout.my_layout, root </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> view)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="textview-扩展" tabindex="-1"><a class="header-anchor" href="#textview-扩展" aria-hidden="true">#</a> TextView 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-ellipsize" target="_blank" rel="noopener noreferrer">TextView → isEllipsize<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-underline" target="_blank" rel="noopener noreferrer">TextView → isUnderline<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/is-strike-through" target="_blank" rel="noopener noreferrer">TextView → isStrikeThrough<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/text-color" target="_blank" rel="noopener noreferrer">TextView → textColor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/text-to-String" target="_blank" rel="noopener noreferrer">TextView → textToString<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/hint-to-String" target="_blank" rel="noopener noreferrer">TextView → hintToString<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-text" target="_blank" rel="noopener noreferrer">EditText → updateText<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/clear" target="_blank" rel="noopener noreferrer">TextView → clear<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-typeface" target="_blank" rel="noopener noreferrer">TextView → updateTypeface<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-compound-drawables" target="_blank" rel="noopener noreferrer">TextView → updateCompoundDrawables<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/update-compound-drawables-with-intrinsic-bounds" target="_blank" rel="noopener noreferrer">TextView → updateCompoundDrawablesWithIntrinsicBounds<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/set-digits" target="_blank" rel="noopener noreferrer">TextView → setDigits<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>TextView</code> 的扩展。</p></div><p><code>TextView</code> 是 Android 中最常用的组件之一，<code>BetterAndroid</code> 为 <code>TextView</code> 提供了一些能在 Kotlin 中使用更加方便的扩展功能。</p><p>判断 <code>TextView</code> 是否存在省略号。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 判断 TextView 是否存在省略号</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isEllipsize </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isEllipsize</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取、设置 <code>TextView</code> 的下划线效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 是否存在下划线效果</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isUnderline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isUnderline</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的下划线效果</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.isUnderline </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取、设置 <code>TextView</code> 的删除线效果。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 是否存在删除线效果</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> isStrikeThrough </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.isStrikeThrough</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的删除线效果</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.isStrikeThrough </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在设置下划线或删除线效果时，你可能需要手动对 <code>TextView</code> 使用 <code>paint.isAntiAlias = true</code> 启用抗锯齿以达到更好的效果，这是 Android 中对于绘制性能的一个历史遗留问题。</p></div><p>获取、设置 <code>TextView</code> 的文本颜色。</p><p>虽然说，你能够使用 <code>TextView.setTextColor</code> 方法来设置文本颜色，但是它不能很好地被识别为 Kotlin 中的 Getter、Setter 方法，因为对应的 <code>TextView.getTextColors</code> 是一个 <code>ColorStateList</code> 对象。</p><p>所以 <code>BetterAndroid</code> 添加了针对这个功能的扩展，现在，你可以使用以下方式获取、设置 <code>TextView</code> 的文本颜色。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 的文本颜色</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.textColor</span></span>
<span class="line"><span style="color:#768390;">// 设置 TextView 的文本颜色</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.textColor </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Color.RED</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取 <code>TextView</code> 的文本并将其转换为 <code>String</code>。</p><p>通常情况下，直接使用 <code>TextView.getText</code> 获取到的文本是一个 <code>CharSequence</code> 对象，如果你需要将其转换为 <code>String</code>，需要 <code>getText().toString()</code>，这看起来比较繁琐。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，现在，你可以使用以下方式获取 <code>TextView</code> 的文本并将其转换为 <code>String</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 的文本并转换为 String</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.</span><span style="color:#DCBDFB;">textToString</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>TextView.getHint</code> 也可以使用同样类似的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 获取 TextView 的提示文本并转换为 String</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> hint </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> textView.</span><span style="color:#DCBDFB;">hintToString</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>EditText</code> 的文本。</p><p><code>EditText</code> 继承自 <code>TextView</code>，直接使用 <code>setText(...)</code> 更新的文本会导致光标位置依然处于第一位。</p><p><code>BetterAndroid</code> 为此提供了一个更加方便的方式，它会根据文本长度自动帮你设置 <code>setSelection</code> 以保持光标位置始终在文本的最后。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 EditText 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> editText: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 更新 EditText 的文本</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">updateText</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>清空 <code>TextView</code> 的文本。</p><p>使用 <code>setText(&quot;&quot;)</code> 或 <code>text = &quot;&quot;</code> 看起来不是很友好，于是 <code>BetterAndroid</code> 为此提供了一个更加简单的方式。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 清空 TextView 的文本</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">clear</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>TextView</code> 的 <code>Typeface</code> (字体)。</p><p><code>Typeface</code> 是 Android 中的字体，有时候我们只需要关心字体的粗细和斜体，而不需要设置具体的字体。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，现在，你可以使用以下方式更新 <code>TextView</code> 的 <code>Typeface</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 仅将 TextView 的字体设置为粗体</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateTypeface</span><span style="color:#ADBAC7;">(Typeface.BOLD)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>TextView</code> 的 <code>CompoundDrawables</code> (复合绘图)。</p><p><code>CompoundDrawables</code> 是 <code>TextView</code> 中的复合绘图，它包含了 <code>Drawable</code> 对象。</p><p>使用传统的 <code>setCompoundDrawables</code> 方法需要传入四个参数且不需要的参数还需要填写 <code>null</code>，这看起来非常麻烦。</p><p><code>BetterAndroid</code> 为此提供了一个更加简单的方式，现在，你可以使用以下方式直接更新 <code>TextView</code> 的 <code>CompoundDrawables</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 TextView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> textView: </span><span style="color:#F69D50;">TextView</span></span>
<span class="line"><span style="color:#768390;">// 更新 TextView 的 CompoundDrawables</span></span>
<span class="line"><span style="color:#768390;">// 我们只需要填写需要方向的参数，其它方向的参数将会自动重新设置为原有的 CompoundDrawables</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateCompoundDrawables</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_left,</span></span>
<span class="line"><span style="color:#ADBAC7;">    top </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_top,</span></span>
<span class="line"><span style="color:#ADBAC7;">    right </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_right,</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_bottom</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 使用 setCompoundDrawablesWithIntrinsicBounds 的方式更新 CompoundDrawables</span></span>
<span class="line"><span style="color:#ADBAC7;">textView.</span><span style="color:#DCBDFB;">updateCompoundDrawablesWithIntrinsicBounds</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">    left </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_left,</span></span>
<span class="line"><span style="color:#ADBAC7;">    top </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_top,</span></span>
<span class="line"><span style="color:#ADBAC7;">    right </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_right,</span></span>
<span class="line"><span style="color:#ADBAC7;">    bottom </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> R.drawable.ic_bottom</span></span>
<span class="line"><span style="color:#ADBAC7;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>TextView</code> 的输入限制 (Digits)。</p><p>这个属性仅能在 XML 中方便地使用 <code>digits</code> 来设置，但是如果你需要动态修改它，就需要 <code>TextView.setKeyListener</code> 方法。</p><p>为此，<code>BetterAndroid</code> 为 <code>TextView</code> 提供了一个 <code>setDigits</code> 方法，你可以使用以下方式设置 <code>TextView</code> 的输入限制。</p><p>由于输入功能是由 <code>EditText</code> 完成的，而 <code>EditText</code> 继承自 <code>TextView</code>，所以一般情况下此方法仅在 <code>EditText</code> 中使用。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 EditText 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> editText: </span><span style="color:#F69D50;">EditText</span></span>
<span class="line"><span style="color:#768390;">// 设置输入框仅能输入数字</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 设置输入框仅能输入小写字母</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">// 第二位参数为 inputType，你可以在此处限制输入框的显示行为</span></span>
<span class="line"><span style="color:#768390;">// 例如仅能输入数字且显示为密码</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">, InputType.TYPE_CLASS_NUMBER or InputType.TYPE_NUMBER_VARIATION_PASSWORD)</span></span>
<span class="line"><span style="color:#768390;">// 第三位参数为 locale，你可以在此处设置输入框的国家区域 (仅在 Android 8 及以上版本中可用)</span></span>
<span class="line"><span style="color:#768390;">// 例如设置为中国大陆地区</span></span>
<span class="line"><span style="color:#ADBAC7;">editText.</span><span style="color:#DCBDFB;">setDigits</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;0123456789&quot;</span><span style="color:#ADBAC7;">, locale </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Locale.CHINA)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="recyclerview-扩展" tabindex="-1"><a class="header-anchor" href="#recyclerview-扩展" aria-hidden="true">#</a> RecyclerView 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.view/layout-manager" target="_blank" rel="noopener noreferrer">RecyclerView → layoutManager<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>RecyclerView</code> 的扩展。</p></div><p><code>RecyclerView</code> 是 Android 中最常用的列表组件之一，<code>BetterAndroid</code> 为 <code>RecyclerView</code> 提供了一些能在 Kotlin 中使用更加方便的扩展功能。</p><p>获取 <code>RecyclerView</code> 的 <code>LayoutManager</code>。</p><p><code>BetterAndroid</code> 为你提供了一个方便获取 <code>LayoutManager</code> 的方式，现在你不再需要获取到 <code>RecyclerView</code> 的 <code>layoutManager</code> 后再使用 <code>as</code> 转换为对应类型，你可以直接使用以下方式获取 <code>LayoutManager</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 假设这就是你的 RecyclerView 对象</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> recyclerView: </span><span style="color:#F69D50;">RecyclerView</span></span>
<span class="line"><span style="color:#768390;">// 获取 RecyclerView 的 LayoutManager，如果类型错误或不存在将会返回 null</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> layoutManager </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> recyclerView.</span><span style="color:#DCBDFB;">layoutManager</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">LinearLayoutManager</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="布局绑定-viewbinding-扩展" tabindex="-1"><a class="header-anchor" href="#布局绑定-viewbinding-扩展" aria-hidden="true">#</a> 布局绑定 (ViewBinding) 扩展</h3><div class="custom-container tip"><p class="custom-container-title">本节内容</p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding" target="_blank" rel="noopener noreferrer">ViewBinding → ViewBinding<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/view-binding" target="_blank" rel="noopener noreferrer">ViewBinding → viewBinding<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding-builder" target="_blank" rel="noopener noreferrer">ViewBinding → ViewBindingBuilder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p><a href="https://betterandroid.github.io/BetterAndroid/KDoc/ui-extension/ui-extension/com.highcapable.betterandroid.ui.extension.binding/-view-binding-delegate" target="_blank" rel="noopener noreferrer">ViewBinding → ViewBindingDelegate<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a></p><p>适用于 <code>ViewBinding</code> 的扩展。</p></div><p><code>ViewBinding</code> 是 Android 中的一个新特性，它能够帮助我们更加方便地操作布局中的组件。</p><p>但是显然官方没有开放对它的使用方法，能够获取到生成类的接口 <code>ViewBinding</code> 也不存在 <code>inflate</code> 等方法的实现，你仅能使用类似 <code>ActivityMainBinding.inflate(layoutInflater)</code> 的方式来装载布局。</p><p>于是 <code>BetterAndroid</code> 对其进行了反射处理来获得其中的 <code>inflate</code> 方法并通过泛型来提取对象的类型。</p><p>这些设计的灵感部分来源于 <a href="https://github.com/DylanCaiCoding/ViewBindingKTX" target="_blank" rel="noopener noreferrer">ViewBindingKTX<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span></a> 项目，非常感谢这个项目的作者。</p><p>现在你可以使用以下方式创建一个 <code>ViewBindingBuilder</code> 并可以将其传递到任何需要的地方进行操作。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#768390;">// 创建一个 ViewBindingBuilder</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> builder </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ViewBinding</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;">&gt;()</span></span>
<span class="line"><span style="color:#768390;">// 在需要时装载布局</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> builder.</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(layoutInflater)</span></span>
<span class="line"><span style="color:#768390;">// 假设这就是你的 View</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> view: </span><span style="color:#F69D50;">View</span></span>
<span class="line"><span style="color:#768390;">// 你也可以绑定到一个存在的 View 上</span></span>
<span class="line"><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> builder.</span><span style="color:#DCBDFB;">bind</span><span style="color:#ADBAC7;">(view)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样我们就实现了 <code>ViewBinding</code> 的传递，你可以在任何地方使用它。</p><p>你还可以使用委托的方式来实现在 <code>Activity</code> 等地方使用 <code>ViewBinding</code>。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActvity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">Activity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">val</span><span style="color:#ADBAC7;"> binding: </span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">by</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">viewBinding</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要实现将 <code>ViewBinding</code> 封装到父类并使用泛型的方式绑定到子类，你可以使用以下方式。</p><p>首先我们需要创建一个父类。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">open</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourBaseActvity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">VB</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">ViewBinding</span><span style="color:#ADBAC7;">&gt; : </span><span style="color:#F69D50;">Activity</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">lateinit</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">var</span><span style="color:#ADBAC7;"> binding: </span><span style="color:#F69D50;">VB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// 在这里装载 ViewBinding</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> ViewBindingBuilder.</span><span style="color:#DCBDFB;">fromGeneric</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">VB</span><span style="color:#ADBAC7;">&gt;(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">).</span><span style="color:#DCBDFB;">inflate</span><span style="color:#ADBAC7;">(layoutInflater)</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#DCBDFB;">setContentView</span><span style="color:#ADBAC7;">(binding.root)</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将这个父类作为全局对象继承到子类中。</p><blockquote><p>示例如下</p></blockquote><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="shiki github-dark-dimmed" style="background-color:#22272e;" tabindex="0"><code><span class="line"><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">YourActivity</span><span style="color:#ADBAC7;"> : </span><span style="color:#F69D50;">YourBaseActivity</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F69D50;">ActivityMainBinding</span><span style="color:#ADBAC7;">&gt;() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">override</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">fun</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState: </span><span style="color:#F69D50;">Bundle</span><span style="color:#ADBAC7;">?) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">onCreate</span><span style="color:#ADBAC7;">(savedInstanceState)</span></span>
<span class="line"><span style="color:#ADBAC7;">        binding.mainText.text </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Hello World!&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">小提示</p><p>你还可以参考 <a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#activity" class="router-link-active router-link-exact-active">ui-extension → Activity</a> 直接使用已经封装好的 <code>AppBindingActivity</code> 或参考 <a aria-current="page" href="/BetterAndroid/zh-cn/library/ui-extension.html#fragment" class="router-link-active router-link-exact-active">ui-extension → Fragment</a> 直接使用已经封装好的 <code>AppBindingFragment</code>。</p></div><div class="custom-container danger"><p class="custom-container-title">特别注意</p><p>如果你的应用程序在编译时启用了混淆功能，你需要参考 <a href="../config/r8-proguard">R8 与 ProGuard 混淆</a> 来正确配置混淆规则。</p></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/BetterAndroid/BetterAndroid/edit/main/docs-source/src/zh-cn/library/ui-extension.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口中打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: qzmmcn@163.com">fankesyooni</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/BetterAndroid/zh-cn/library/ui-component-adapter.html" class="" aria-label="ui-component-adapter"><!--[--><!--]--> ui-component-adapter <!--[--><!--]--></a></span><span class="next"><a href="/BetterAndroid/zh-cn/library/system-extension.html" class="" aria-label="system-extension"><!--[--><!--]--> system-extension <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/BetterAndroid/assets/app-0wxN3PPV.js" defer></script>
  </body>
</html>
